"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fec59413-6edd-5595-9366-6f5c20b7ea41")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8964],{779412:(e,t,a)=>{a.d(t,{$P:()=>p,Dz:()=>l,E8:()=>E,G8:()=>N,Jh:()=>o,Mm:()=>d,Ms:()=>f,Q$:()=>T,QB:()=>v,VA:()=>y,Vf:()=>u,W2:()=>c,_R:()=>_,b:()=>i,gt:()=>b,hx:()=>n,jG:()=>h,o:()=>s,oE:()=>g,y3:()=>S,yH:()=>m,yl:()=>r});let r="org_upgrade_single_team_modal--modal--GKnof",s="org_upgrade_single_team_modal--planModalHeader--NLEl0",l="org_upgrade_single_team_modal--planModalHeaderText--N4j-B",n="org_upgrade_single_team_modal--planModalTitle---5-PM text--fontPos24--YppUD text--_fontBase--QdLsd",i="org_upgrade_single_team_modal--closeButton--JAEBU",o="org_upgrade_single_team_modal--planModalHeaderDivider--joa2o",m="org_upgrade_single_team_modal--planGrid--Z0ray",d="org_upgrade_single_team_modal--planGrid__vertDivided--yqTLR",c="org_upgrade_single_team_modal--seeAllFeatures--1cwDV",u="org_upgrade_single_team_modal--teamPlan--Xe5rA",_="org_upgrade_single_team_modal--itemList--UYnKe",p="org_upgrade_single_team_modal--planItem--Arex9",g="org_upgrade_single_team_modal--checkIcon--kCeMJ",E="org_upgrade_single_team_modal--planSelectButton--lvbr7",h="org_upgrade_single_team_modal--scrollContainer--Gqm8k",y="org_upgrade_single_team_modal--subtitle--5pxSm",v="org_upgrade_single_team_modal--planNameBase--AJCle text--fontPos16--oMC-G text--_fontBase--QdLsd",f="org_upgrade_single_team_modal--planPriceView--4ISjE",S="org_upgrade_single_team_modal--priceRow--DF93K text--fontPos11--2LvXf text--_fontBase--QdLsd",N="org_upgrade_single_team_modal--priceFigureWithFigjam--D0gWt text--fontPos16--oMC-G text--_fontBase--QdLsd",T="org_upgrade_single_team_modal--figmaPriceWithDevMode--Y3tyk",b="org_upgrade_single_team_modal--devModeText--w5m6B"},822907:(e,t,a)=>{a.d(t,{$g:()=>d,DI:()=>m,Eh:()=>n,GK:()=>s,J1:()=>o,KV:()=>l,b:()=>r,cr:()=>g,jG:()=>c,kz:()=>u,nW:()=>p,o8:()=>_,u1:()=>i,wv:()=>E});let r="universal_upgrade_sequence--closeButton--S-6M2",s="universal_upgrade_sequence--modalTitle--1nrY9 text--fontPos18--rYXJb text--_fontBase--QdLsd",l="universal_upgrade_sequence--modalSubtitle--cMqzE text--fontPos14--OL9Hp text--_fontBase--QdLsd",n="universal_upgrade_sequence--createTeamInput--MuDzz basic_form--labeledInputGroup--aeD6L text--fontPos14--OL9Hp text--_fontBase--QdLsd",i="universal_upgrade_sequence--spinner--K-cVF",o="universal_upgrade_sequence--tileUpgradeButton--xeNnN",m="universal_upgrade_sequence--nextButtonSmall--LG9cZ universal_upgrade_sequence--nextButton--jDx3Q",d="universal_upgrade_sequence--createTeamSection--V3vtF",c="universal_upgrade_sequence--scrollContainer--8KeVt",u="universal_upgrade_sequence--scrollContainerTopBorder--Aeveh",_="universal_upgrade_sequence--scrollContainerBottomBorder--dWxc4",p="universal_upgrade_sequence--teamTileContainer--uef0R org_self_serve--teamLargeTileContainer--5eyHQ",g="universal_upgrade_sequence--teamTile--giMxy org_self_serve--teamTileLarge--n-y0u text--fontPos14--OL9Hp text--_fontBase--QdLsd",E="universal_upgrade_sequence--lastTeamTile--jYkbS universal_upgrade_sequence--teamTile--giMxy org_self_serve--teamTileLarge--n-y0u text--fontPos14--OL9Hp text--_fontBase--QdLsd"},469720:(e,t,a)=>{a.r(t),a.d(t,{EduReviewPage:()=>b});var r=a(411855),s=a(188507),l=a(586459),n=a(946689),i=a(158875),o=a(797129),m=a(881690),d=a(135876),c=a(524173),u=a(163023),_=a(154254),p=a(939863),g=a(403491),E=a(310908),h=a(738269),y=a(995852),v=a(229403),f=a(672517),S=a(820113),N=a(630834);let T=e=>{let t=(0,s.d4)(t=>{let a=v.Xw.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,s.d4)(t=>t.teamUserByTeamId[e]||{}),n=(0,s.wA)();r.useEffect(()=>{n(v.Xw({teamId:e}))},[n,e]);let i=t!==l.r.SUCCESS;return r.useEffect(()=>{if(!i){let e=Object.keys(a).length;n(y.Az({numWhiteboardEditors:e})),n(y.js({numDesignEditors:e}))}},[n,i,a]),i};function b({selectedView:e}){let{teamId:t}=e,a=T(t),l=(0,s.wA)(),v=()=>{l(y.Nj({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return r.createElement(f.fu,{name:"Edu Review",properties:{teamId:t}},r.createElement("div",null,r.createElement(o.O,{menu:r.createElement(i.X,{onClick:()=>{l(h.$T({view:"team",teamId:t})),e.onCloseOrComplete?.()}},r.createElement(u.B,{svg:N.default,className:"edu_review--modalCloseX--t3-Et",dataTestId:"close-button"}))},r.createElement("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--IgK6O"},r.createElement(E.J,{index:3})),r.createElement("div",{className:_.cx.flex.flexColumn.itemsCenter.alignCenter.$},r.createElement(c.JR,null,(0,p.tx)("edu.almost_done_everything_look_good")),r.createElement(n.Kz,{multiple:4}),r.createElement(d.x,{isLoading:a},()=>r.createElement(m.o,null,r.createElement(g.d,{selectedView:e,onClickConfirm:v,currency:(0,S.LN)(),canSeeBillingAddressExp:!1})))))))}},332088:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeMultiTeamModal:()=>V});var r=a(411855),s=a(188507),l=a(268853),n=a(966712),i=a(752553),o=a(485727),m=a(799569),d=a(192437),c=a(946689),u=a(355819),_=a(163023),p=a(939863),g=a(738269),E=a(662275),h=a(101505),y=a(672517),v=a(710667),f=a(304769),S=a(13513),N=a(50661),T=a(820113),b=a(984968),x=a(135163),w=a(928491),A=a(807577),I=a(474742);let C="org_upgrade_multi_team_modal--planModalDivider--o3qOc";var P=a(779412),D=a(450147),k=a(999918);let M=(0,n.ck)("50ae1752a504eea59f2a3efac6b0f2d1ed74435a"),O=(0,n.ck)("e2148969d5a469e76c053a23b6647d487e6d64ee"),L=(0,n.ck)("fc0fcfadcfe50c96f4dcf859aabe1952c822ae2a");function B(e){return r.createElement("div",{className:"org_upgrade_multi_team_modal--planItem--DcvNe"},r.createElement(_.B,{svg:D.A,className:"org_upgrade_multi_team_modal--checkIcon--zLWzz"}),r.createElement("p",null,e.text))}function R(e){let t=(0,s.wA)(),a=()=>{t(E.Ce())},l=r.useMemo(()=>[(0,p.t)("org_upgrade.multi_team.plan_items.shared_design_libraries"),(0,p.t)("org_upgrade.multi_team.plan_items.shared_fonts_and_styles"),(0,p.t)("org_upgrade.multi_team.plan_items.centralized_billing_and_admin_controls"),(0,p.t)("org_upgrade.multi_team.plan_items.single_sign_on_sso_integrations")],[]),d=e=>r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListEntry--MBLhi",key:e.id},r.createElement(w.Ro,{size:10,hideFallbackInitial:!0,entity:e,shape:"SQUARE"}),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListEntryName--E7Oz5 ellipsis--ellipsis--Tjyfa"},e.name)),y=r.useMemo(()=>{switch(Object.keys(e.teams).length){case 2:return 184;case 3:return 192;default:return 221}},[e.teams]),N=P.G8,b=(0,T.wU)(),A=S.Oq.dict(e=>({currency:b.currency,billableProductKey:e,tier:x.Ju.ORG,renewalTerm:x.IX.YEAR,unit:x.IX.MONTH})),D=(0,v.SK)(A,v.Fq.UPSELL_MODALS),[R]=(0,i.mI)(D);if(null===R.data)throw Error("Price data is null");let V=R.data;return r.createElement(I.Nb,{className:"org_upgrade_multi_team_modal--modal--Eph1i",hide:a,size:"fitContent",useModalViewScroll:!1},r.createElement(u.P,{className:"org_upgrade_multi_team_modal--scrollContainer--Qmo14"},r.createElement("div",{className:"org_upgrade_multi_team_modal--planModalHeader--3StZ-",style:{height:64,marginBottom:32}},r.createElement("div",{className:"org_upgrade_multi_team_modal--planModalTitle---8WXo text--fontPos24--YppUD text--_fontBase--QdLsd",style:{fontWeight:600}},(0,p.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan")),r.createElement(m.Jn,{className:"org_upgrade_multi_team_modal--closeButton--DsBya",onClick:a,innerText:"close"})),r.createElement("div",{className:C}),r.createElement("div",{className:"org_upgrade_multi_team_modal--planDetails--5tvMx"},r.createElement("div",{className:"org_upgrade_multi_team_modal--planDetailsLeft--Gd-Za"},r.createElement("div",{className:"org_upgrade_multi_team_modal--billingCadence--7VSSA"},(0,p.tx)("org_upgrade.multi_team.annual_billing_only")),r.createElement("div",{className:P.y3},r.createElement("p",{className:P.Q$},(0,p.tx)("org_upgrade.multi_team.figma"),(0,n.kc)().billing_dev_mode_customer_ui&&r.createElement("div",{className:P.gt},r.createElement(o.G,null))),r.createElement("div",null,(0,p.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:r.createElement("span",{className:P.G8},b.formatMoney(V[f.ud.DESIGN].amount))}))),(0,n.kc)().billing_dev_mode_customer_ui&&r.createElement("div",{className:P.y3},(0,p.tx)("org_upgrade.multi_team.dev_mode"),r.createElement("div",null,(0,p.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:r.createElement("span",{className:P.G8},b.formatMoney(V[f.ud.DEV_MODE].amount))}))),r.createElement("div",{className:P.y3},(0,p.tx)("org_upgrade.multi_team.fig_jam"),r.createElement("div",null,(0,p.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:r.createElement("span",{className:N},b.formatMoney(V[f.ud.FIGJAM].amount))}))),r.createElement("div",{className:"org_upgrade_multi_team_modal--planText--yWkM6"},r.createElement("div",{className:"org_upgrade_multi_team_modal--itemList--Atvs1"},l.map((e,t)=>r.createElement("div",{key:t},r.createElement(B,{text:e}))),r.createElement("div",{className:"org_upgrade_multi_team_modal--seeAll---IIqV"},r.createElement(c.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0},(0,p.tx)("org_upgrade.multi_team.see_all_features")))))),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamIllustrationSection--fo4Lr",style:{height:y}},r.createElement("div",{className:"org_upgrade_multi_team_modal--teamIllustrationLeftSection--mq8iD"},r.createElement("div",{className:"org_upgrade_multi_team_modal--dynamicTeamListSection--rTcPV"},r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListHeader--WkSnI"},r.createElement("img",{className:"org_upgrade_multi_team_modal--placeholderOrgLogo--YHQ27",src:L,draggable:!1,alt:""}),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListOrgName--2QSd-"},(0,p.tx)("org_upgrade.multi_team.acme_inc")),r.createElement(_.B,{svg:k.A,className:"org_upgrade_multi_team_modal--multiTeamOrgUpgradeAdjustSvg--t10aI"})),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListDivider--4LHjy"}),(()=>{let t=e.unsortedTeamIds,a=[];for(var s=0;s<Math.min(4,t.length);s++){let r=e.teams[t[s]];a.push(d(r))}return r.createElement("div",{className:"org_upgrade_multi_team_modal--teamList--cUzNg"},a)})(),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamIllustrationRightSection---iPaZ"},r.createElement("img",{className:"org_upgrade_multi_team_modal--filesIllustration--KZ4YR",src:O,draggable:!1,alt:""}),r.createElement("img",{src:M,draggable:!1,alt:""})))))),r.createElement("div",{className:C}),r.createElement(c.vd,{onClick:()=>{a(),t(g.$T({view:"orgSelfServe",upsellSource:e.upsellSource}))},className:"org_upgrade_multi_team_modal--continueButton--3-IKc",trackingProperties:{trackingDescriptor:h.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource}},(0,p.tx)("org_upgrade.multi_team.continue")),r.createElement("div",{className:"org_upgrade_multi_team_modal--spaceFiller--M22d1"})))}let V=(0,s.Ng)(e=>{let{teams:t}=e;return{teams:t,unsortedTeamIds:(0,b._L)(e.user,e.roles,e.teams)}})((0,y.kp)(function(e){return r.createElement(d.tH,{boundaryKey:"OrgUpgradeMultiTeamModal",team:l.e.BILLING,fallback:r.createElement(N.K,null)},r.createElement(r.Suspense,{fallback:r.createElement(A.N,{hiddenTitle:(0,p.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan"),estimatedWidth:500,estimatedHeight:500})},r.createElement(R,{...e})))},"Multi-Team Org Upgrade Modal"))},392201:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeSingleTeamModal:()=>z,PlanWithFigjamPriceView:()=>R});var r=a(411855),s=a(188507),l=a(268853),n=a(629019),i=a.n(n),o=a(966712),m=a(752553),d=a(485727),c=a(799569),u=a(192437),_=a(946689),p=a(355819),g=a(163023),E=a(939863),h=a(738269),y=a(662275),v=a(101505),f=a(672517),S=a(710667),N=a(304769),T=a(13513),b=a(50661),x=a(99506),w=a(820113),A=a(243987),I=a(556261),C=a(135163),P=a(807577),D=a(474742),k=a(779412),M=a(592312),O=a(414270);function L(e){return r.createElement(r.Fragment,null,r.createElement(g.B,{svg:e.isArrow?M.A:O.A,className:k.oE}),r.createElement("p",null,e.text))}function B(e){return r.createElement("div",{className:k.Vf},r.createElement("div",{className:k._R},e.features.map((e,t)=>r.createElement("div",{key:t,className:k.$P},r.createElement(L,{text:e.text,isArrow:e.isArrow}))),e.plan===A.Jm.ORG&&r.createElement("div",{className:k.W2},r.createElement(_.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0},(0,E.tx)("org_upgrade.single_team.see_all_features"))),e.plan===A.Jm.ORG&&r.createElement(_.vd,{onClick:e.onUpgrade,className:k.E8,trackingProperties:{trackingDescriptor:v.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource}},(0,E.tx)("org_upgrade.single_team.upgrade_to_an_organization"))))}function R(e){return r.createElement("div",{className:k.Ms,style:{padding:e.padding},"data-testid":e.dataTestId},r.createElement("h2",{className:k.QB},e.name),r.createElement("p",{className:k.VA},e.subtitle),r.createElement("div",{className:k.y3},r.createElement("p",{className:k.Q$},(0,E.tx)("plan_details.figma"),(0,o.kc)().billing_dev_mode_customer_ui&&r.createElement("div",{className:k.gt},r.createElement(d.G,null))),r.createElement("div",null,r.createElement("p",{className:k.G8},e.prices[N.ud.DESIGN]))),(0,o.kc)().billing_dev_mode_customer_ui&&e.prices[N.ud.DEV_MODE]&&r.createElement("div",{className:k.y3},r.createElement("p",null,(0,E.tx)("plan_details.dev_mode_only")),r.createElement("div",null,r.createElement("p",{className:k.G8},e.prices[N.ud.DEV_MODE]))),r.createElement("div",{className:k.y3},r.createElement("p",null,(0,E.tx)("plan_details.fig_jam")),r.createElement("div",null,r.createElement("p",{className:k.G8},e.prices[N.ud.FIGJAM]))))}function V(e){let t;let a=(0,s.wA)(),l=()=>{a(y.Ce())},n=(0,s.d4)(e=>e.teamBilling),o=new w.vr(n.summary.currency),d=T.Oq.exclude([N.ud.DEV_MODE]),u=d.dict(e=>({currency:o.currency,billableProductKey:e,tier:C.Ju.PRO,renewalTerm:C.IX.YEAR,unit:C.IX.MONTH})),_=T.Oq.dict(e=>({currency:o.currency,billableProductKey:e,tier:C.Ju.ORG,renewalTerm:C.IX.YEAR,unit:C.IX.MONTH})),{plan:g}=e;t=g?{planParentId:g.key.parentId||"",planType:g.key.type}:{planParentId:"",planType:x.OL.TEAM};let v=(0,S.ic)(u,t,S.Fq.UPSELL_MODALS_CONTRACT),f=(0,S.SK)(_,S.Fq.UPSELL_MODALS),[b,I]=(0,m.mI)(v,f);if(null===b.data||null===I.data)throw Error("Price data was null");let P=b.data,M=I.data;return r.createElement(D.Nb,{className:k.yl,hide:l,size:586,useModalViewScroll:!1},r.createElement(p.P,{className:k.jG},r.createElement("div",{className:k.o},r.createElement("div",{className:k.Dz},r.createElement("div",{className:k.hx},(0,E.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow"))),r.createElement(c.Jn,{className:k.b,onClick:l,innerText:"close"})),r.createElement("div",{className:i()(k.yH,k.Mm)},r.createElement(R,{dataTestId:"pro-prices",name:(0,E.t)("org_upgrade.single_team.professional_plan"),subtitle:(0,E.t)("org_upgrade.single_team.price_when_billed_annually"),prices:d.dict(e=>`${o.formatMoney(P[e].amount)}`),padding:"16px 31px 16px 36px"}),r.createElement(R,{dataTestId:"org-prices",name:(0,E.t)("org_upgrade.single_team.organization_plan"),subtitle:(0,E.t)("org_upgrade.single_team.annual_billing_only"),prices:T.Oq.dict(e=>`${o.formatMoney(M[e].amount)}`),padding:"16px 32px 16px 33px"})),r.createElement("div",{className:k.Jh}),r.createElement("div",{className:k.yH},r.createElement(B,{plan:A.Jm.PRO,features:[{text:(0,E.t)("org_upgrade.single_team.unlimited_design_files_and_projects_in_one_team")},{text:(0,E.t)("org_upgrade.single_team.design_library_within_one_team")},{text:(0,E.t)("org_upgrade.single_team.audio_conversations_in_files")}]}),r.createElement(B,{plan:A.Jm.ORG,features:[{text:(0,E.t)("org_upgrade.single_team.everything_in_professional_plus"),isArrow:!0},{text:(0,E.t)("org_upgrade.single_team.unlimited_teams_and_unlimited_projects")},{text:(0,E.t)("org_upgrade.single_team.cross_team_design_libraries_and_fonts")},{text:(0,E.t)("org_upgrade.single_team.control_file_sharing_inside_and_outside_of_your_organization")},{text:(0,E.t)("org_upgrade.single_team.single_sign_on_sso_integration")},{text:(0,E.t)("org_upgrade.single_team.private_plugins_and_plugin_management")},{text:(0,E.t)("org_upgrade.single_team.full_content_ownership")}],onUpgrade:()=>{l(),a(h.$T({view:"orgSelfServe",upsellSource:e.upsellSource}))},upsellSource:e.upsellSource}))))}function F(e){let t=(0,I.tJ)(),[a]=(0,m.mI)(t);return r.createElement(V,{...e,plan:a.data})}let z=(0,f.kp)(function(e){return r.createElement(u.tH,{boundaryKey:"OrgUpgradeSingleTeamModal",team:l.e.BILLING,fallback:r.createElement(b.K,null)},r.createElement(r.Suspense,{fallback:r.createElement(P.N,{hiddenTitle:(0,E.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow"),estimatedWidth:586,estimatedHeight:586})},r.createElement(F,{...e})))},"Single-Team Org Upgrade Modal")},152495:(e,t,a)=>{a.r(t),a.d(t,{UniversalUpgradeSequence:()=>G});var r=a(411855),s=a(188507),l=a(517333),n=a(320063),i=a(799569),o=a(946689),m=a(939863),d=a(55992),c=a(738269),u=a(507877),_=a(662275),p=a(995852),g=a(672517),E=a(594901),h=a(611978),y=a(820113),v=a(243987),f=a(622139),S=a(637590),N=a(474742),T=a(838516),b=a(218881),x=a(27087),w=a(921619),A=a(452441),I=a(493323),C=a(980820),P=a(936500),D=a(902957),k=a(349410),M=a(988022),O=a(860178),L=a(693223),B=a(344950),R=a(822907);let V=(0,C.nF)((e,{teamName:t,selectedView:a,currency:r,onSuccess:s,onError:l,onBillingCompleteRedirectInfo:n})=>{let i;x.Ay.post("/api/teams/create",{team_name:t}).then(({data:t})=>(i="team"in t.meta?t.meta.team:t.meta,e.dispatch(D.bE({team:i})),(0,M._J)("Team Created",i.id,e.getState()),B.G.getTeam({teamId:i.id}))).then(({data:t})=>{for(let a of t.meta)e.dispatch(P.bE({role:a}));s(),e.dispatch(p.WX({teamId:i.id,selectedView:a,newTeam:!0,currency:r,...n?{onBillingCompleteRedirectInfo:n}:{}}))}).catch(()=>{l()})});function F(e){let t=(0,s.wA)(),a=(0,O.TA)(),l=(0,s.d4)(L.P),n=(0,s.d4)(e=>e.roles.byTeamId),[i,d]=r.useState(!1),[c,u]=r.useState(!1),[p,g]=r.useState(""),E=(0,y.LN)(),h=(0,b.I7)("starter_team_loophole_experiment_m0"),v=(0,b.I7)("starter_team_loophole_experiment_m1"),f=()=>{t(_.Ce())},S=(0,T.s)(()=>{d(!0),p?t(V({teamName:p,selectedView:e.selectedView,currency:E,onSuccess:f,onError:()=>{d(!1),u(!0)},onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})):(d(!1),u(!0))});return a&&!(0,k.e5)({userId:a,teams:Object.values(l),rolesByTeamId:n,getM0Config:h.getConfig,getM1Config:v.getConfig})?r.createElement("div",{"data-testid":"createTeamToUpgradeView"},r.createElement("p",{className:R.KV},(0,m.tx)("universal_upgrade_sequence.subtitle")),c&&r.createElement(r.Fragment,null,r.createElement(w.I,{message:(0,m.t)("universal_upgrade_sequence.error"),marginTop:16}),r.createElement(o.Kz,{multiple:1})),r.createElement(o.Kz,{multiple:2}),r.createElement("div",{className:R.$g},r.createElement("div",{className:R.Eh},r.createElement(A.L,{dataTestId:"createTeamInput",placeholder:(0,m.t)("universal_upgrade_sequence.team_name.placeholder"),value:p||"",onChange:e=>{g(e.target.value)},required:!0,maxLength:255})),r.createElement(o.vd,{dataTestId:"nextButton",className:R.DI,disabled:!p||i,onClick:S},i?r.createElement(I.kt,{className:R.u1}):(0,m.tx)("universal_upgrade_sequence.next")))):null}var z=a(252011),U=a(80889);function G(e){let[t,a]=r.useState("selectTeam"),T=(0,s.wA)(),b=(0,h._6)(),x=(0,E.FC)(),w=(0,s.d4)(e=>e.payment.promo),A=(0,s.d4)(e=>e.payment.billingPeriod),I=()=>{T(_.Lo())},C=()=>{T(_.Ce()),e.onDone?.()},P=t=>{"teamUpgrade"===b.view?T(c.$T({...b,teamFlowType:S.SC.UPGRADE_EXISTING_TEAM,teamId:t.id,paymentStep:(0,d.kR)(b.paymentStep,S.SC.UPGRADE_EXISTING_TEAM,b.billingPeriod||null,w,b.planType||S.Sc.UNDETERMINED,w?f.tn.CONFIRM_PAY:f.tn.CHOOSE_PLAN),billingPeriod:e.billingPeriod||A})):T(p.WX({teamId:t.id,selectedView:b,newTeam:!1,currency:(0,y.LN)(),billingPeriod:e.billingPeriod,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo,openInNewTab:e.openInNewTab})),C()},D=()=>{0===(0,v.PS)(x).length?(T(u.Dw({openInNewTab:!l.eD})),a("createTeam")):a("selectTeam")};return((0,n.h)(()=>{e.plan===z.I.PRO&&D()}),"selectTeam"===t)?(()=>{let t=(0,v.PS)(x);return r.createElement(g.fu,{name:"Upgrade Select Team Modal"},r.createElement(N.Nb,{hide:I,size:436},r.createElement("h1",{"data-testid":"modalTitle",className:R.GK},(0,m.tx)("universal_upgrade_sequence.title")),r.createElement(i.Jn,{dataTestId:"closeButton",className:R.b,onClick:I,innerText:(0,m.t)("universal_upgrade_sequence.close_modal")}),r.createElement(o.Kz,{multiple:2}),r.createElement(U.I,{eligibleTeams:t,selectTeam:P}),r.createElement(o.Kz,{multiple:2}),r.createElement(F,{selectedView:b,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})))})():r.createElement(r.Fragment,null)}},80889:(e,t,a)=>{a.d(t,{I:()=>u});var r=a(411855),s=a(946689),l=a(355819),n=a(939863),i=a(101505),o=a(672517),m=a(243987),d=a(928491),c=a(822907);function u({customUpgradeText:e,eligibleTeams:t,selectTeam:a,numDesignFilesPerTeam:u,showEditorCount:_=!0}){let[p,g]=(0,r.useState)(!1),[E,h]=(0,r.useState)(!1);r.useEffect(()=>{g(t.length>=5)},[t]);let y=`${c.jG}`;p&&(y+=` ${c.o8}`),E&&(y+=` ${c.kz}`);let v=t[t.length-1],f=u&&u.length===t.length;return r.createElement(l.P,{onScroll:(e,a)=>{let r=t.length>=5,s=r&&0!==e,l=r&&e+a.trackHeight!==a.scrollHeight;l!==p&&g(l),s!==E&&h(s)},className:y,scrollingDisabled:!1},r.createElement("div",{className:c.nW},t.map((t,l)=>r.createElement(o.jm,{key:t.id,className:t===v?c.wv:c.cr,onClick:()=>a(t),trackingProperties:{teamId:t.id,trackingDescriptor:i.c.UPGRADE},innerText:"Upgrade"},r.createElement("div",{className:"org_self_serve--teamInfo--xNtY0"},r.createElement(d.Ro,{className:"org_self_serve--teamIcon--H4ZjA",entity:t,size:40,shape:"SQUARE"}),r.createElement("div",{className:"org_self_serve--teamText--Xvk6X"},r.createElement("p",{className:"org_self_serve--teamName---V8nF text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},t.name),r.createElement("p",{className:"org_self_serve--teamEditors--SfrdT text--fontPos11--2LvXf text--_fontBase--QdLsd"},!f&&_&&(0,n.tx)("universal_upgrade.select_team.editor_count.seat_rename",{editors:t.editors}),f&&u&&(0,n.tx)("universal_upgrade.select_team.files_per_team_figma_files_used",{numFilesUsed:u[l],numFreeFilesAllowed:m.WW})))),r.createElement(s.nR,{className:c.J1,dataTestId:"select_team.upgrade"},e??(0,n.tx)("universal_upgrade.select_team.upgrade"))))))}},271125:(e,t,a)=>{a.r(t),a.d(t,{UpgradeContactSalesModal:()=>D});var r=a(411855),s=a(188507),l=a(838516),n=a(133537),i=a(27087),o=a(799569),m=a(921619),d=a(946689),c=a(163023),u=a(939863),_=a(662275),p=a(349410),g=a(672517),E=a(300874),h=a(237870),y=a(158950),v=a(474742),f=a(401874);let S="upgrade_contact_sales_modal--closeButton--tSoDt";var N=a(783423),T=a(339290);let b=()=>[{name:(0,u.t)("universal_upgrade.1_10"),value:"1-10"},{name:(0,u.t)("universal_upgrade.11_50"),value:"11-50"},{name:(0,u.t)("universal_upgrade.51_250"),value:"51-250"},{name:(0,u.t)("universal_upgrade.251_1_k"),value:"251-1K"},{name:(0,u.t)("universal_upgrade.1_k_5_k"),value:"1K-5K"},{name:(0,u.t)("universal_upgrade.5_k_10_k"),value:"5K-10K"},{name:(0,u.t)("universal_upgrade.10_k_50_k"),value:"10K-50K"},{name:(0,u.t)("universal_upgrade.50_k_100_k"),value:"50K-100K"},{name:(0,u.t)("universal_upgrade.100_k"),value:"100K+"}],x=()=>r.createElement(r.Fragment,null,r.createElement("option",{value:"",disabled:!0},(0,u.t)("universal_upgrade.company_size")),b().map(e=>r.createElement("option",{value:e.value,"data-testid":`select-option-${e.value}`,key:e.value},e.name))),w=()=>[{name:(0,u.t)("contact_sales.topic.request_a_sales_demo_or_talk_to_sales"),value:"request_a_sales_demo_or_talk_to_sales"},{name:(0,u.t)("contact_sales.topic.billing_and_invoicing"),value:"billing_and_invoicing"},{name:(0,u.t)("contact_sales.topic.technical_and_product_support"),value:"technical_and_product_support"},{name:(0,u.t)("contact_sales.topic.educators_and_students"),value:"educators_and_students"}],A=()=>r.createElement(r.Fragment,null,r.createElement("option",{value:"",disabled:!0},(0,u.t)("contact_sales.which_topic_best_fits_your_needs")),w().map(e=>r.createElement("option",{value:e.value,"data-testid":`select-option-${e.value}`,key:e.value},e.name))),I=()=>[{name:(0,u.t)("contact_sales.product.design"),value:"design"},{name:(0,u.t)("contact_sales.product.figjam"),value:"figjam"},{name:(0,u.t)("contact_sales.product.dev_mode"),value:"dev_mode"},{name:(0,u.t)("contact_sales.product.all_products"),value:"all_products"}],C=()=>r.createElement(r.Fragment,null,r.createElement("option",{value:"",disabled:!0},(0,u.t)("contact_sales.which_product_are_you_most_interested_in")),I().map(e=>r.createElement("option",{value:e.value,"data-testid":`select-option-${e.value}`,key:e.value},e.name))),P=(0,h.Ju)(function({hideModal:e}){return r.createElement(g.fu,{name:"Upgrade Contact Sales Success Modal"},r.createElement(v.Nb,{hide:e,size:480},r.createElement("div",{className:"upgrade_contact_sales_modal--successModalWrapper--x82rW"},r.createElement("div",{className:"upgrade_contact_sales_modal--successModalTitle--YEf9E upgrade_contact_sales_modal--modalTitle--Qvyl- text--fontPos13--xW8hS text--_fontBase--QdLsd"},r.createElement(c.B,{className:"upgrade_contact_sales_modal--successIcon--sRlqE",svg:T.A}),(0,u.tx)("universal_upgrade.contact_sales.thank_you")),r.createElement(o.Jn,{className:S,onClick:e,innerText:"close"})),r.createElement("div",{className:"upgrade_contact_sales_modal--successModalText--71FmX text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,u.tx)("universal_upgrade.contact_sales.sales_will_reach_out"))))},"ContactSalesSuccessModal");function D(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.user),[h,T]=(0,r.useState)({email:a?.email??"",name:a?.handle??"",overridePlaceholderText:e.overridePlaceholderText,freeText:"",result:void 0,companyName:void 0,companySize:"",jobTitle:"",topic:"",product:"",phone:"",formErrors:{}}),b=(0,p.Mx)(),w=()=>{t(_.Lo())},I=()=>{t((0,_.to)({type:P,data:{hideModal:()=>t(_.Ce())}}))},D=()=>({email:h.email,name:h.name,company_name:h.companyName,topic:h.topic,product:h.product,phone:h.phone,message:h.freeText,source:e.source,form_name:"topic_v1"}),k=()=>({email:h.email,name:h.name,company_name:h.companyName,company_size:h.companySize,job_title:h.jobTitle,message:h.freeText,source:e.source,form_name:"topic_control"}),M=(0,l.s)(()=>{let t={},a=(0,u.t)("universal_upgrade.this_field_is_required");if(h.email?(0,n.xf)(h.email)||(t.email=(0,u.t)("universal_upgrade.please_provide_a_valid_email_address")):t.email=a,h.name||(t.name=a),h.companyName||(t.companyName=a),b?(h.topic||(t.topic=a),h.product||(t.product=a)):e.source===E.Bi.VARIABLES_MODES?h.jobTitle||(t.jobTitle=a):h.companySize||(t.companySize=a),T(e=>({...e,formErrors:t,result:void 0})),0===Object.keys(t).length){let e=b?D():k();i.Ay.post("/api/form_post/org-lead-gen",e).then(()=>{T(e=>({...e,result:"success"})),I()}).catch(()=>T(e=>({...e,result:"error"})))}}),O=e=>h.formErrors[e]?"upgrade_contact_sales_modal--error--cYtEz basic_form--labeledInputGroup--aeD6L":void 0,L=e=>{let t=h.formErrors[e];return t?r.createElement("div",{"data-testid":"form-error",className:"upgrade_contact_sales_modal--errorMessage--rMLJd text--fontPos11--2LvXf text--_fontBase--QdLsd"},t):null},B=(e,t,a=!1)=>r.createElement(r.Fragment,null,r.createElement(d.Lf,{htmlName:t,label:e,value:h[t]||"",onChange:e=>{let a={[t]:e.target.value};T(e=>({...e,...a}))},disabled:a,className:O(t)}),L(t)),R=(e,t,a)=>{let s=O(t)||f.Os;return r.createElement(r.Fragment,null,r.createElement("div",{className:s},r.createElement("div",{className:"upgrade_contact_sales_modal--select--9gFoe address_form--selectRowFull--8DtEB"},r.createElement(d.VE,{name:t,placeholder:e,defaultValue:"","data-testid":`${t}-select`,onChange:e=>{let a={[t]:e.target.value};T(e=>({...e,...a}))},required:!0},a),r.createElement(c.B,{className:f.nO,svg:N.A}))),L(t))};return r.createElement(g.fu,{name:"Upgrade Contact Sales Modal"},r.createElement(v.Nb,{className:"upgrade_contact_sales_modal--contactSalesModal--2MR1X",hide:w,size:480},r.createElement("div",{className:"upgrade_contact_sales_modal--titleWrapper--vDPOx"},r.createElement("h1",{className:"upgrade_contact_sales_modal--modalTitle--Qvyl- text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,u.tx)("universal_upgrade.contact_sales_title")),r.createElement(o.Jn,{className:S,onClick:w,innerText:"close"})),r.createElement("div",{className:"upgrade_contact_sales_modal--modalBody--XpCf4"},"error"===h.result&&r.createElement(r.Fragment,null,r.createElement(m.I,{message:(0,u.t)("universal_upgrade.there_was_an_error_processing_your_information_please_try_again")}),r.createElement(d.Kz,{multiple:.5})),b?r.createElement("fieldset",null,B((0,u.t)("universal_upgrade.email_address"),"email"),B((0,u.t)("universal_upgrade.full_name"),"name"),B((0,u.t)("universal_upgrade.company_name"),"companyName"),R((0,u.t)("contact_sales.which_topic_best_fits_your_needs"),"topic",A()),R((0,u.t)("contact_sales.which_product_are_you_most_interested_in"),"product",C()),B((0,u.t)("contact_sales.phone_number_optional"),"phone")):r.createElement("fieldset",null,B((0,u.t)("universal_upgrade.email_address"),"email"),B((0,u.t)("universal_upgrade.full_name"),"name"),B((0,u.t)("universal_upgrade.company_name"),"companyName"),e.source===E.Bi.VARIABLES_MODES?B((0,u.t)("universal_upgrade.job_title"),"jobTitle"):R((0,u.t)("universal_upgrade.company_size"),"companySize",x())),r.createElement(d.Kz,{multiple:1}),r.createElement("p",null,(0,u.tx)("universal_upgrade.how_can_we_help_optional")),r.createElement(d.Kz,{multiple:1}),r.createElement(y.v,{className:"upgrade_contact_sales_modal--freeTextInput--O6-W0 text--fontPos13--xW8hS text--_fontBase--QdLsd",value:h.freeText,onChange:e=>T(t=>({...t,freeText:e.target.value})),placeholder:h.overridePlaceholderText??(0,u.t)("universal_upgrade.e_g_i_m_looking_to_set_up_a_demo_of_figma"),maxLength:500})),r.createElement("div",{className:"upgrade_contact_sales_modal--modalFooter--HBxAu"},r.createElement(d.tM,{onClick:w},(0,u.tx)("general.cancel")),r.createElement(d.vd,{onClick:M},(0,u.tx)("universal_upgrade.submit")))))}},752014:(e,t,a)=>{a.r(t),a.d(t,{OrgSelfServeFigJamPage:()=>eP,OrgSelfServeFigJamPageInner:()=>eC});var r=a(411855),s=a(188507),l=a(140593),n=a(268853),i=a(629019),o=a.n(i),m=a(776250),d=a(133537),c=a(737947),u=a(966712),_=a(752553),p=a(776621),g=a(27087),E=a(192437),h=a(946689),y=a(455057),v=a(493323),f=a(355819),S=a(163023),N=a(881388),T=a(939863),b=a(898211),x=a(684614),w=a(707570),A=a(729129),I=a(738269),C=a(662275),P=a(995852),D=a(931828),k=a(349410),M=a(672517),O=a(710667),L=a(988022),B=a(304769),R=a(13513),V=a(864319),F=a(66957),z=a(50661),U=a(582410),G=a(720647),K=a(195971),Y=a(488983),j=a(99506),W=a(820113),$=a(227544),H=a(724838),X=a(596607),q=a(416618),J=a(351239),Q=a(135163),Z=a(802026),ee=a(622139),et=a(668860),ea=a(637590),er=a(143678),es=a(679892),el=a(831429),en=a(198809);function ei(e,t){let a={};for(let r of e.filter(e=>t.has(e.team.id))){let e=[{users:r.designEditors,propKey:"designEditor"},{users:r.figjamEditors,propKey:"figjamEditor"},{users:[],propKey:"devMode"}],t={};e.forEach(({users:e,propKey:s})=>{for(let l of e){if((0,d.nD)(l.email))return;a[l.id]||(a[l.id]={user:l,teamIds:[],designEditor:!1,figjamEditor:!1,devMode:!1,teams:[]}),l.id in t||(t[l.id]=new Set),a[l.id][s]=!0,t[l.id].has(r.team.id)||(a[l.id].teamIds.push(r.team.id),a[l.id].teams.push(r.team),t[l.id].add(r.team.id))}})}return a}function eo(e,t){let a=U.H5.dict(a=>(t[a]??0)+(e[a]??0)),r=Object.values(a).reduce((e,t)=>e+t,0);return a[G.vu]+=Math.max($.OT-r,0),a}var em=a(648841),ed=a(164141),ec=a(317113),eu=a(154254),e_=a(175290),ep=a(809840),eg=a(67294),eE=a(928491),eh=a(896528);function ey({users:e,size:t=eg.Pf.MEDIUM,maxShow:a=2}){let s=e.slice(0,a),l=Math.max(e.length-a,0);return r.createElement(e_.Y,{verticalAlignItems:"center",spacing:"-8px",horizontalAlignItems:"start",width:"hug-contents"},s.map((e,a)=>r.createElement(eE.Ro,{className:eu.cx.borderBox.relative.b1.colorBorderBg.$,key:`${e.id}${a}`,entity:e,size:t})),l>0&&r.createElement(eh.f,{className:eu.cx.fontSemiBold.colorText.borderBox.relative.b1.colorBorderBg.$,text:`+${l}`,size:t}))}var ev=a(516319),ef=a(401761),eS=a(501191);let eN={[G.G_.DESIGN]:r.createElement(ep.E,{fontSize:13},(0,T.tx)("checkout.design_with_dev_mode_included")),[G.G_.DEV_MODE]:r.createElement(ep.E,{fontSize:13},(0,T.tx)("general.dev_mode")),[G.G_.FIGJAM]:r.createElement(ep.E,{fontSize:13},(0,T.tx)("general.figjam"))},eT={[G.G_.DESIGN]:ec.y1.DESIGN_AND_DEV_MODE,[G.G_.DEV_MODE]:ec.y1.DEV_MODE,[G.G_.FIGJAM]:ec.y1.WHITEBOARD};function eb({type:e,users:t,additionalSeats:a,onClick:s}){let[l,n]=(0,r.useState)(!1);return r.createElement("div",{className:`${eu.cx.b1.colorBorder.bRadius6.wFull.borderBox.$} ${l?eu.cx.colorBgHover.$:""}`,role:"button",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:s,tabIndex:0,"data-testid":`seat-summary-card-${e}`},r.createElement(e_.Y,{padding:{top:10,right:16,bottom:10,left:16},direction:"horizontal",verticalAlignItems:"center",horizontalAlignItems:"space-between"},r.createElement(e_.Y,{horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(ec.MW,{type:eT[e],size:ec.LE.LARGE}),r.createElement(e_.Y,{direction:"vertical",horizontalAlignItems:"start",padding:{left:4},spacing:0},eN[e],r.createElement("div",null,r.createElement(ep.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,T.tx)("checkout.seats",{numOfSeats:t.length+a})),a>0&&r.createElement("span",null,"\xa0",r.createElement(ep.E,null,(0,T.tx)("checkout.paranthesis",{content:r.createElement(ep.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,T.tx)("checkout.empty_seats",{numOfEmptySeats:a}))}))),l&&r.createElement("span",null,r.createElement(ep.E,{color:"secondary"},"\xa0\u2022\xa0"),r.createElement(ep.E,{fontSize:11,color:"brand",fontWeight:"medium"},(0,T.tx)("general.edit")))))),r.createElement(ey,{users:t}),a>0&&0===t.length&&r.createElement(S.B,{svg:ef.A,useOriginalSrcFills_DEPRECATED:!0})))}function ex({additionalDesignSeats:e,additionalDevModeSeats:t,additionalWhiteboardSeats:a,selectedEditors:s,onClick:l}){let n={[G.G_.DESIGN]:{users:[],additionalSeats:e},[G.G_.DEV_MODE]:{users:[],additionalSeats:t},[G.G_.FIGJAM]:{users:[],additionalSeats:a}};for(let e of Object.values(s))e.designEditor?n[G.G_.DESIGN].users.push(e.user):e.devMode&&n[G.G_.DEV_MODE].users.push(e.user),e.figjamEditor&&n[G.G_.FIGJAM].users.push(e.user);return r.createElement(r.Fragment,null,r.createElement(e_.Y,{direction:"vertical",spacing:"12px",height:"hug-contents"},Object.entries(n).map(([e,{users:t,additionalSeats:a}])=>r.createElement(eb,{key:e,type:e,users:t,additionalSeats:a,onClick:()=>{l(),(0,L.Cu)({name:"org_checkout_seat_summary_card"})}}))),r.createElement("div",{className:eu.cx.mt24.$},r.createElement("button",{"data-testid":"seat-summary-add-seats-cta",className:`${ev.uD} ${ev.i9}`,onClick:()=>{l(),(0,L.Cu)({name:"org_checkout_add_more_seats"})}},r.createElement(S.B,{className:ev.Hl,svg:eS.A}),r.createElement(ep.E,null,(0,T.tx)("checkout.add_additional_seats")))))}var ew=a(720818),eA=a(733982),eI=a(54375);class eC extends r.Component{constructor(e){super(e),this.canSeeTeamAndSeatSelectionSteps=()=>this.state.eligibleUpgrades.length>0||this.state.loading||!!this.props.newTeamProps,this.effectiveStep=()=>this.props.step===Z.X1.Initial||this.props.step===Z.X1.ChoosePlan?this.props.newTeamProps?.teamFlowType===ea.SC.CREATE_AND_UPGRADE?Z.X1.CreateTeam:this.canSeeTeamAndSeatSelectionSteps()?Z.X1.TeamSelect:Z.X1.Details:this.props.step,this.setStep=e=>{this.props.dispatch(I.$T({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case Z.X1.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(Z.X1.TeamSelect);break;case Z.X1.AddCollaborators:this.setStep(Z.X1.Details);break;case Z.X1.PseudoCreateTeam:this.setStep(Z.X1.TeamSelect);break;case Z.X1.TeamSelect:this.setStep(Z.X1.Details);break;case Z.X1.Details:this.setStep(Z.X1.Payment);break;case Z.X1.Payment:this.onSubmitPaymentAndAddress();break;case Z.X1.Review:this.onSubmitPurchaseOrder();break;case Z.X1.SeatSelect:case Z.X1.Confirmation:break;default:(0,l.xb)(e)}},this.ctaProperties=()=>{let e=this.getUpgradesByLicenseType(),t=eo(e,this.state.emptySeatsByLicenseType);return{numEditors:e[G.vu],numFigJamEditors:e[G.tL],numDisplayedTeams:this.state.eligibleUpgrades.length+(this.state.newTeamName?1:0),numMigratedTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),numTotalDesignSeats:t[G.G_.DESIGN],totalFigJamSeats:t[G.G_.FIGJAM],totalDevModeSeats:t[G.G_.DEV_MODE],proposedSubtotal:U.H5.reduce((e,a)=>e+=(t[a]??0)*(12*this.props.prices[(0,V.Zx)(a)].amount),0)/100,domain:(0,d.zN)(this.props.user.email),currency:this.state.currency,upsellSource:this.props.upsellSource}},this.renderNextButton=()=>{let e;let t=!1,a=this.effectiveStep();switch(a){case Z.X1.CreateTeam:case Z.X1.PseudoCreateTeam:e=(0,T.t)("org_self_serve.create_team_step.next_select_team"),t=!this.state.newTeamName;return;case Z.X1.AddCollaborators:e=(0,T.t)("org_self_serve.create_team_step.next_select_team");return;case Z.X1.TeamSelect:e=(0,T.t)("org_self_serve.details_step.next_organization_details");break;case Z.X1.Details:e=(0,T.t)("org_self_serve.payment_step.next_payment");let s=this.state.orgDetails.legalOrgName?.length,n=this.state.orgDetails.actorName?.length;t=this.props.canSeeBillingAddressExp?t||!s||s<1:t||!s||!n||s<1||n<1;break;case Z.X1.Payment:t=t||this.state.apiPending,e=(0,T.t)("org_self_serve.review_step.next_review");break;case Z.X1.Review:case Z.X1.Confirmation:case Z.X1.SeatSelect:return null;default:(0,l.xb)(a)}return r.createElement("div",{className:ev.rh},r.createElement(h.vd,{className:ev.sk,disabled:t,onClick:()=>this.onSubmit(),trackingProperties:this.ctaProperties(),dataTestId:"next-step-button"},e))},this.onTeamToggle=e=>{this.state.selectedTeamIds.has(e)?this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds,selectedEditors:ei(this.state.eligibleUpgrades,t.selectedTeamIds)}),()=>this.computeAdditionalDesignSeats()):this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e),selectedEditors:ei(this.state.eligibleUpgrades,t.selectedTeamIds.add(e))}),()=>this.computeAdditionalDesignSeats())},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let r=this.state.orgDetails;switch(t){case"actor_name":r.actorName=a.trim();break;case"legal_org_name":r.legalOrgName=a.trim();break;case"org_name":r.orgName=a.trim()}this.setState({orgDetails:r})},this.contactSales=()=>{this.props.dispatch((0,C.to)({type:b.lk,data:{source:b.B7.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{(0,u.kc)().ps_benchmark?(this.props.newTeamProps&&(0,K.Al)(this.props.user.id),c.Ay.redirect("/files/recent")):(this.props.dispatch(I.$T({view:"recentsAndSharing"})),this.props.newTeamProps&&(0,K.Al)(this.props.user.id))},this.updateAdditionalSeats=e=>{let t=this.getUpgradesByLicenseType();this.setState({emptySeatsByLicenseType:U.H5.dict(a=>(e[a]??0)-(t[a]??0))})},this.addEditors=()=>{let e=this.getUpgradesByLicenseType(),t=eo(e,this.state.emptySeatsByLicenseType);this.props.dispatch((0,C.to)({type:ed.Bx,data:{seatDataByLicenseType:{[G.vu]:{minSeats:Math.max(e[G.vu],$.Hh),currentSeats:t[G.vu],seatUnitCostInCents:this.props.prices[B.ud.DESIGN].amount},[G.tL]:{minSeats:e[G.tL],currentSeats:t[G.tL],seatUnitCostInCents:this.props.prices[B.ud.FIGJAM].amount},[G.PE]:{minSeats:e[G.PE]??0,currentSeats:t[G.PE]??0,seatUnitCostInCents:this.props.prices[B.ud.DEV_MODE].amount}},minTotalSeats:$.OT,updateAdditionalSeats:this.updateAdditionalSeats,showAnnualPrice:!0,dispatch:this.props.dispatch,currency:this.state.currency}}))},this.updateAdditionalEmptySeats=e=>{this.setState({emptySeatsByLicenseType:U.H5.dict(t=>e[t])})},this.selectEditors=()=>{let e=this.state.selectedEditors;for(let t in e)e[t]={...e[t]};this.props.dispatch((0,C.to)({type:ed.ml,data:{users:e,updateSelectedEditors:this.updateSelectedEditors,updateAdditionalEmptySeats:this.updateAdditionalEmptySeats,dispatch:this.props.dispatch,currency:this.state.currency,minTotalSeats:$.OT,seatInfo:{design:{minCount:$.Hh,additionalSeatCount:this.state.emptySeatsByLicenseType[G.vu]},figjam:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[G.tL]},dev_mode:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[G.PE]??0}},monthlyPriceByProduct:R.Oq.dict(e=>this.props.prices[e].amount)}}))},this.updateSelectedEditors=e=>{this.setState(t=>({...t,selectedEditors:e}))},this.renderBillingItems=()=>{let e=new W.vr(this.state.currency),t=eo(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),a={[G.vu]:{totalSeats:t[G.vu],price:this.props.prices[B.ud.DESIGN].amount,headerString:(0,T.tx)("org_self_serve.billing_items.total_figma_design_editor_with_dev_mode_included.seat_rename",{totalDesignSeatsCount:t[G.vu]})},[G.tL]:{totalSeats:t[G.tL],price:this.props.prices[B.ud.FIGJAM].amount,headerString:(0,T.tx)("org_self_serve.headers.total_fig_jam_editor_seats_count.seat_rename",{totalFigJamEditorSeatsCount:t[G.tL]})},[G.PE]:{totalSeats:t[G.PE]??0,price:this.props.prices[B.ud.DEV_MODE].amount,headerString:(0,T.tx)("org_self_serve.billing_items.total_seat_count.dev_mode",{totalSeatCount:t[G.PE]??0})}};return r.createElement("div",null,U.H5.sort(U.AG).map(t=>{let s=a[t];return null==s?r.createElement(r.Fragment,null):r.createElement("div",{key:t},r.createElement("div",{className:ev.Yn},r.createElement("div",{className:ev.TK},s.headerString),r.createElement("div",{className:ev.TK},e.formatMoney(s.price*s.totalSeats*12,{showCents:!1}))),r.createElement("div",{className:ev.Sv},(0,T.tx)("org_self_serve.billing_items.total_seat_cost_for_product",{annualMemberCost:e.formatMoney(s.price,{showCents:!1}),seatCount:s.totalSeats})),r.createElement(h.Kz,{direction:"y",value:16}))}))},this.renderPurchaseSummary=()=>{let e=this.getUpgradesByLicenseType(),t=e[G.vu],a=e[G.tL],s=e[G.PE]??0,l=(0,W._Z)(),n=t+a+s,i=n<$.OT,o=!i&&t<$.Hh&&(0,u.kc)().org_checkout_min_seat_info_copy,m=this.getSubtotal(),c=(0,H.Hw)(this.props.user)?(0,u.kc)().org_checkout_min_seat_info_copy?r.createElement(r.Fragment,null,(0,T.tx)("org_self_serve.purchase_summary.added_empty_seats",{minCount:$.OT}),"\xa0",(0,T.tx)("org_self_serve.purchase_summary.empty_seats_included",{numOfSeats:n,numOfEmptySeats:$.OT-n,seatsText:(0,T.tx)("checkout.seats_text",{numOfSeats:n})})):(0,T.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_seats_added_empty_seats.seat_rename",{minCount:$.OT}):(0,T.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:$.OT}),_=r.createElement(r.Fragment,null,(0,T.tx)("org_self_serve.purchase_summary.added_empty_design_seats",{minCount:$.Hh}),"\xa0",(0,T.tx)("org_self_serve.purchase_summary.empty_design_seats_included",{numOfEmptySeats:$.Hh-t})),p=new W.vr(this.state.currency);return r.createElement("div",{className:ev.er},r.createElement("div",null,i&&r.createElement("div",{className:`${ev.uC} ${ev.i9}`},r.createElement(S.B,{className:ev.$y,svg:eI.A}),c),o&&r.createElement("div",{className:`${ev.uC} ${ev.i9}`},r.createElement(S.B,{className:ev.$y,svg:eI.A}),_),r.createElement(f.P,{className:ev.TB,scrollingDisabled:!1},r.createElement("div",null,r.createElement("div",{className:ev.Ov},(0,T.tx)("org_self_serve.purchase_summary.organization_plan")),r.createElement("div",{className:ev.Sv},(0,T.tx)("org_self_serve.purchase_summary.domain",{domain:(0,d.zN)(this.props.user.email)})),r.createElement(h.Kz,{direction:"y",value:16})),r.createElement(h.Kz,{direction:"y",value:8}),r.createElement(ex,{selectedEditors:this.state.selectedEditors,additionalDesignSeats:this.state.emptySeatsByLicenseType[G.vu],additionalWhiteboardSeats:this.state.emptySeatsByLicenseType[G.tL],additionalDevModeSeats:this.state.emptySeatsByLicenseType[G.PE]??0,onClick:this.selectEditors}),r.createElement(h.Kz,{direction:"y",value:20})),r.createElement("div",null,r.createElement("div",{className:ev.aK}),l&&r.createElement(r.Fragment,null,r.createElement(h.Kz,{direction:"y",value:16}),r.createElement("div",{className:ev.Yn},r.createElement("div",{className:ev.V},(0,T.tx)("org_self_serve.purchase_summary.currency_text")),r.createElement(A.D,{currency:this.state.currency,dropdownShown:this.props.dropdownShown,supportedCurrencies:(0,W.B9)(),changeCurrency:e=>{this.props.dispatch(P.MN({currency:e})),this.setState({currency:e})},shortFormDisplay:!0,paddingOverride:0})),r.createElement(h.Kz,{direction:"y",value:20}),r.createElement("div",{className:ev.aK})),this.state.paymentError&&this.effectiveStep()===Z.X1.Payment&&r.createElement(r.Fragment,null,r.createElement(y._,{color:y.S.INFORMATION,text:this.state.paymentError})),r.createElement(h.Kz,{direction:"y",value:16}),this.renderBillingItems(),r.createElement("div",{className:ev.aK}),r.createElement(h.Kz,{direction:"y",value:24}),r.createElement(F.m,{formattedSubtotal:p.formatMoney(m,{showCents:!1})}),r.createElement(h.Kz,{direction:"y",value:24}),this.renderNextButton(),r.createElement(h.Kz,{direction:"y",value:24}))),r.createElement("div",null,r.createElement("div",{className:ev.ZM}),r.createElement(h.Kz,{direction:"y",value:16}),r.createElement("div",{className:ev.i9},r.createElement(S.B,{svg:eA.A,className:ev.$y}),r.createElement("span",null,(0,T.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:r.createElement("span",{className:ev.uD,onClick:this.contactSales},(0,T.tx)("org_self_serve.purchase_summary.contact_our_sales_team"))}))),r.createElement(h.Kz,{direction:"y",value:16})))},this.state={loading:!0,eligibleUpgrades:[],selectedEditors:{},initialEditors:{},selectedTeamIds:new Set,payment:{card:null,last4:null,address:(0,ee.EB)((0,W.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,emptySeatsByLicenseType:U.H5.dict(e=>0),currency:this.props.currency,shippingAddress:(0,ee.EB)((0,W.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgradesFigjam()}fetchTeamEligibleUpgradesFigjam(){return es.Eh.getEligibleUpgradesFigjam().catch(e=>{let t=e.data.message;return this.props.dispatch(I.$T({view:"recentsAndSharing"})),this.props.dispatch(N.s.error(t||(0,T.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{let t=e.meta.eligible_upgrades,a=new Set(t.map(e=>e.team.id)),r=ei(t,a);this.setState({loading:!1,eligibleUpgrades:t,selectedTeamIds:a,selectedEditors:r,initialEditors:r},()=>this.computeAdditionalDesignSeats())})}componentDidUpdate(e,t){(0,d.zN)(e.user.email)!==(0,d.zN)(this.props.user.email)&&c.Ay.redirect("/purchase-organization")}computeAdditionalDesignSeats(){this.setState(e=>({emptySeatsByLicenseType:function(e,t,a){let r=eo(e,t);return{...t,[G.vu]:Math.max(t[G.vu],$.Hh-e[G.vu],$.OT-a-e[G.vu]-r[G.tL]-(r[G.PE]??0))}}(this.getUpgradesByLicenseType(),e.emptySeatsByLicenseType,this.props.initialDesignSeats)}))}getSubtotal(){let e=eo(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),t=U.H5.dict(t=>(e[t]??0)*this.props.prices[(0,V.Zx)(t)].amount*12),a=0;return U.H5.forEach(e=>{a+=t[e]??0}),a}getTaxTotal(e){return e*this.state.taxRate/100}getTotal(e){return e+this.getTaxTotal(e)}getDisplayedCostBreakdown(){let e=this.getSubtotal(),t=this.getTaxTotal(e),a=this.getTotal(e);return{subtotal:e,tax_total:t,total:a}}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,r=this.state.regionalVatId;if(null===t){this.setState({paymentError:(0,T.t)("org_self_serve.payment_step.sorry_please_wait")});return}if(this.setState({apiPending:!0}),a&&!await (0,el.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,T.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.setState({apiPending:!1,paymentError:e});return}if(r&&!await (0,el.V)(r,e.country,()=>{},this.onVatValidationFail,e.region))return;let s=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,J.Ey)(t,s).then(t=>{if(!t.error&&t.token)return(0,J.To)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?g.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,ee.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):g.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>(this.setState({apiPending:!1,paymentError:e.data?.message||e.message}),Promise.reject())).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(Z.X1.Review))});{let e=t.error?.message||(0,T.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.setState({apiPending:!1,paymentError:e})}})}getEditorStatusChanges(){let e={upgrade:{[j.G_.DESIGN]:[],[j.G_.WHITEBOARD]:[],[j.G_.DEV_MODE]:[]},downgrade:{[j.G_.DESIGN]:[],[j.G_.WHITEBOARD]:[],[j.G_.DEV_MODE]:[]}},{selectedEditors:t,initialEditors:a}=this.state;for(let r in t){let s=t[r];if(r in a){let t=a[r];s.designEditor?t.designEditor||e.upgrade[j.G_.DESIGN].push(r):(t.designEditor&&e.downgrade[j.G_.DESIGN].push(r),s.devMode&&e.upgrade[j.G_.DEV_MODE].push(r)),s.figjamEditor!==t.figjamEditor&&(s.figjamEditor?e.upgrade[j.G_.WHITEBOARD].push(r):e.downgrade[j.G_.WHITEBOARD].push(r))}else s.designEditor?e.upgrade[j.G_.DESIGN].push(r):s.devMode&&e.upgrade[j.G_.DEV_MODE].push(r),s.figjamEditor&&e.upgrade[j.G_.WHITEBOARD].push(r)}for(let r in a)if(!(r in t)){let t=a[r];t.designEditor&&e.downgrade[j.G_.DESIGN].push(r),t.figjamEditor&&e.downgrade[j.G_.WHITEBOARD].push(r)}return e}onSubmitPurchaseOrder(){this.props.dispatch(D.b({completed_org_cart_flow:!0}));let e=this.getEditorStatusChanges(),t=eo(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),a=U.H5.dict(e=>t[e]??0),r={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:a,editor_status_changes:e,stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null,displayed_cost_breakdown:this.getDisplayedCostBreakdown()};this.state.newTeamName&&(r={...r,new_team_options:{team_name:this.state.newTeamName,add_to_org:!0}}),r.design_editors=t[G.vu],r.whiteboard_editors=t[G.tL],this.setState({apiPending:!0}),g.Ay.post("/api/orgs",r).catch(e=>(this.props.dispatch(N.s.error((0,T.Jv)(e,e.data?.message||(0,T.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,p.$D)(n.e.BILLING,Error(`[Billing] Org checkout API failed: ${e.data?.message}`),{extra:{numDesignEditors:t[G.vu],numWhiteboardEditors:t[G.tL],numDevModeSeats:t[G.PE]??0,eligibleUpgrades:JSON.stringify(this.state.eligibleUpgrades.map(e=>({team:e.team.id,figjamEditors:e.figjamEditors.map(e=>e.id),designEditors:e.designEditors.map(e=>e.id)}))),selectedEditors:JSON.stringify(Object.keys(this.state.selectedEditors).map(e=>({userId:e,teamIds:this.state.selectedEditors[e].teamIds}))),selectedTeamIds:JSON.stringify([...this.state.selectedTeamIds]),userId:this.props.user.id}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(Z.X1.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,q.rq)({emails:this.state.inviteEmails,resourceType:j.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:et.e6.EDITOR})),this.state.newTeamName&&e.data.meta.new_team&&(0,K.Al)(this.props.user.id),(0,m.sx)("Self Serve Org Purchased (GTM)"),(0,L.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:r.org_name,upsellSource:this.props.upsellSource})})}getUpgradesByLicenseType(){let{eligibleUpgrades:e,selectedTeamIds:t,selectedEditors:a}=this.state,r={},s={},l={};for(let[e,n]of Object.entries(a)){if(!n.teamIds.some(e=>t.has(e))){delete this.state.selectedEditors[e];continue}n.designEditor&&(r[e]=n),n.figjamEditor&&(s[e]=n),n.devMode&&(l[e]=n)}return e.filter(e=>t.has(e.team.id)).forEach(e=>{e.designEditors.forEach(t=>{!(0,d.nD)(t.email)&&a[t.id]?.designEditor&&(r[t.id]||(r[t.id]={user:t,teamIds:[]}),r[t.id].teamIds.includes(e.team.id)||r[t.id].teamIds.push(e.team.id))}),e.figjamEditors.forEach(t=>{!(0,d.nD)(t.email)&&a[t.id]?.figjamEditor&&(s[t.id]||(s[t.id]={user:t,teamIds:[]}),s[t.id].teamIds.includes(e.team.id)||s[t.id].teamIds.push(e.team.id))})}),{[G.vu]:Object.keys(r).length,[G.tL]:Object.keys(s).length,[G.PE]:Object.keys(l).length}}render(){let e;let t=this.effectiveStep(),a=eo(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),s=new Date().getMonth(),l=new Date().setMonth(s+3),n=new Date().setMonth(s+12),i=this.getSubtotal(),m=this.getTaxTotal(i),c=this.getTotal(i),u=new Map;this.state.eligibleUpgrades.forEach(e=>u.set(e.team,e.designEditors.length+e.figjamEditors.length));let _=e=>{this.props.dispatch(I.$T({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||ea.SC.CREATE_AND_UPGRADE}))};return e=t===Z.X1.Review?r.createElement(r.Fragment,null,r.createElement(ew.d,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:_}),r.createElement(x.W,{isReviewPage:!0}),r.createElement(em.Vw,{onSubmit:this.onSubmit,orgPayment:this.state.payment,renewalDate:n,subTotalCents:i,taxDueCents:m,taxRate:this.state.taxRate,totalCents:c,totalSeats:a,showAdditionalEditorsModal:this.addEditors,trueUpDate:l,totalTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),legalOrgName:this.state.orgDetails.legalOrgName,orgName:this.state.orgDetails.orgName,user:this.props.user,loading:this.state.apiPending,renderBillingItems:this.renderBillingItems,ctaProperties:this.ctaProperties(),currency:this.state.currency,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,navigateToEditPaymentDetails:()=>this.setStep(Z.X1.Payment),navigateToEditOrganizationDetails:()=>this.setStep(Z.X1.Details)})):t===Z.X1.Confirmation?r.createElement(em._u,{totalCents:c,orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):r.createElement(r.Fragment,null,this.props.isOrgAdmin&&r.createElement(ed.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,d.qe)(this.props.user.email)&&r.createElement(ed.VE,{onFileBrowserClick:this.onFileBrowserClick}),r.createElement(ew.d,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:_}),r.createElement("div",{className:ev._h},t===Z.X1.CreateTeam&&r.createElement("div",{className:ev.Bb},r.createElement(w.y,{type:w.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})),t===Z.X1.TeamSelect&&(this.state.loading?r.createElement(v.kt,null):r.createElement("div",null,r.createElement(x.W,null),r.createElement(em.JG,{teamsToEditors:u,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName}))),t===Z.X1.Details&&(this.state.loading?r.createElement(v.kt,null):r.createElement("div",null,r.createElement(x.W,null),r.createElement(em.vj,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp}))),t===Z.X1.Payment&&r.createElement("div",null,r.createElement(x.W,null),r.createElement(f.P,{className:o()(ev.M7,ev.Et),hideScrollbar:!0},r.createElement("div",{className:ev.W},(0,T.tx)("org_self_serve.payment_step.enter_your_payment_details")),r.createElement("form",{className:ev.fI},r.createElement(en.n,{id:"team-upgrade-page-form",cardId:"team-upgrade-page-card",billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,onCardReady:this.onCardReady,onBillingAddressChange:this.onAddressChange,onShippingAddressChange:this.onShippingAddressChange,nameOnPaymentMethod:this.state.nameOnPaymentMethod,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,onClearToken:this.onClearToken,onVatIdChange:this.onVatIdChange,vatId:this.state.vatId,onRegionalVatIdChange:this.onRegionalVatIdChange,regionalVatId:this.state.regionalVatId,isCommunityCheckout:!1,isCheckoutFlow:!0,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp})))),t!==Z.X1.CreateTeam&&this.renderPurchaseSummary())),r.createElement(M.fu,{name:er.e0.ORG_CART,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource}},r.createElement("div",{className:ev.F0},e))}}function eP(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.user),l=(0,s.d4)(e=>(0,X.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===j._D.ADMIN)),i=(0,k.Mh)(),o=(0,s.d4)(e=>e.payment).currency||(0,W.LN)(),m=R.Oq.dict(e=>({currency:o,billableProductKey:e,tier:Q.Ju.ORG,renewalTerm:Q.IX.YEAR,unit:Q.IX.MONTH})),d=(0,O.SK)(m,O.Fq.ORG_CART),[c]=(0,_.mI)(d);return"loaded"!==c.status?r.createElement(z.K,null):r.createElement(E.tH,{sentryTags:{area:n.e.MONETIZATION_UPGRADES},boundaryKey:"OrgSelfServeFigJamPage",fallback:E.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:Y.y4},r.createElement(eC,{...e,dispatch:t,user:a,isOrgAdmin:l,canSeeBillingAddressExp:i,prices:c.data,currency:o}))}eC.displayName="OrgSelfServePage"},552404:(e,t,a)=>{a.r(t),a.d(t,{PromoReviewPage:()=>E});var r=a(411855),s=a(188507),l=a(988261),n=a(881690),i=a(135876),o=a(939863),m=a(403491),d=a(738269),c=a(995852),u=a(758259),_=a(672517),p=a(820113),g=a(257512);function E(e){let{selectedView:t,promo:a}=e,E=(0,s.wA)(),h=(0,g.Ud)({teamId:t.teamId}),y=()=>{(0,l._H)(),E(c.Ay({promo:null})),E(d.$T(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},v=()=>{E(u.S_({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:y,onError:y}))};return a?r.createElement(_.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId}},r.createElement("div",{className:"promo_modals--promoReviewInner---J-fs"},r.createElement("div",{className:"promo_modals--cancelRow--nBn1h"},r.createElement("button",{type:"button",className:"promo_modals--cancelButton--Rbgfe text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:y},(0,o.tx)("promo.promo_review.cancel"))),r.createElement("div",{className:"promo_modals--promoReviewTitle--e7s5s text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,o.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})),r.createElement("div",{className:"promo_modals--promoReviewDescription--aLeG8 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,o.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})),r.createElement("div",null,r.createElement(i.x,{isLoading:h},()=>r.createElement(n.o,null,r.createElement(m.d,{selectedView:t,onClickConfirm:v,currency:(0,p.LN)(),canSeeBillingAddressExp:!1})))))):(y(),null)}},403491:(e,t,a)=>{a.d(t,{d:()=>y});var r=a(411855),s=a(188507),l=a(737947),n=a(966712),i=a(946689),o=a(493323),m=a(939863),d=a(865618),c=a(349410),u=a(6988),_=a(176824),p=a(820113),g=a(622139),E=a(237107),h=a(486184);function y(e){let[t,a]=r.useState(!1),y=new p.vr(e.currency),[v,f]=r.useState(!1),S=(0,s.d4)(e=>e.payment),N=(0,s.d4)(e=>e.payment,(e,t)=>v||e===t),T=(0,s.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",b=(0,c.Ik)(),x=S.displayName||T,w=S.legalName||T,A=S.billingPeriod===g.tY.STUDENT,I=!!(0,_.p)(e.selectedView,S),C=I||A,P=S.submitPending||!I&&!t,{estimatedDesignCost:D,estimatedWhiteboardCost:k}=(0,_.Q)({currency:e.currency}),M=S.numWhiteboardEditors,O=D(S.numDesignEditors,S.billingPeriod),L=k(M,S.billingPeriod),B=C?0:S.taxes?.total||O+L,R=new URLSearchParams(l.Ay.location.search),V=R.get("onCompleteRedirectFileKey"),F=R.get("onCompleteRedirectNodeId"),{trackingDescriptor:z,buttonText:U,finePrint:G}=(0,E.V8)({isPromo:I,isEducationTeam:A,claimsEndAtDate:S.promo?.claims_end_at}),K=async t=>{t.preventDefault(),await f(!0),e.onClickConfirm()},Y=(0,n.kc)().pro_team_business_names;return r.createElement("div",{className:Y?h.HX:h.db},Y&&r.createElement("div",{className:h.PT},r.createElement(u.x,{displayName:x??"",legalName:w??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})),r.createElement("div",{className:Y?h.Bo:void 0},r.createElement("div",{className:h.TV,"data-testid":"review-step-upgrade-title"},(0,m.tx)(A?"edu.checkout_team_name":b?S.billingPeriod===g.tY.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:T})),r.createElement(E.$c,{payment:N,currency:e.currency,isPromo:I,isEducationTeam:A,hasCartStickerShock:b}),r.createElement("div",{className:h.pV}),r.createElement(i.Kz,{multiple:2}),N.taxes&&!!e.billingAddress&&r.createElement(r.Fragment,null,r.createElement(E.Wy,{mainText:(0,m.tx)("pro_cart.info.subtotal"),priceText:y.formatMoney(I?0:N.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),r.createElement(i.Kz,{multiple:1.5}),r.createElement(E.Wy,{mainText:(0,m.tx)("pro_cart.review.tax"),priceText:y.formatMoney(N.taxes?.tax_total||0,{showCents:!0}),subText:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:N.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),r.createElement(i.Kz,{multiple:1.5})),r.createElement(E.Wy,{"data-testid":"confirm-total-summary",mainText:A?(0,m.tx)("pro_cart.review.total"):(0,m.tx)("pro_cart.review.total_due_today"),priceText:y.formatMoney(B,{showCents:!0,showFullFormat:(0,p._Z)()}),subText:I?(0,m.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:N.promo.promo_value}):void 0}),r.createElement(i.Kz,{multiple:2}),r.createElement("div",null,G,!I&&r.createElement("div",{className:h.Gn},r.createElement(d.S,{checked:t,onChange:e=>{a(e.currentTarget.checked)}}),r.createElement("p",null," ",r.createElement(E.Um,null)))),r.createElement(i.Kz,{multiple:2.5}),r.createElement(i.Kz,{multiple:2.5}),r.createElement(i.vd,{className:h.fK,onClick:K,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(F&&V),trackingDescriptor:z},disabled:P,dataTestId:"confirm-purchase-button"},S.submitPending?r.createElement(o.kt,{className:h.S}):U)))}},663790:(e,t,a)=>{a.r(t),a.d(t,{TeamUpgradePageV2:()=>eV});var r=a(411855),s=a(188507),l=a(268853),n=a(133537),i=a(737947),o=a(966712),m=a(988261),d=a(776621),c=a(650322),u=a(192437),_=a(946689),p=a(455057),g=a(135876),E=a(881388),h=a(939863),y=a(898211),v=a(738269),f=a(507877),S=a(662275),N=a(995852),T=a(758259),b=a(931828),x=a(349410),w=a(672517),A=a(843309),I=a(176824),C=a(195971),P=a(964258),D=a(488983),k=a(594901),M=a(860178),O=a(801387),L=a(99506),B=a(820113),R=a(243987),V=a(257512),F=a(428467),z=a(707465),U=a(206193),G=a(622139),K=a(637590),Y=a(392340),j=a(501114),W=a(486184);function $({disableInvites:e,collaborators:t,setCollaborators:a,willSendInvites:s,skipInviteStep:l}){let n=(e,r)=>{if(r>=t.length)return;let s=[...t];s[r]=e,a(s)};return r.createElement(r.Fragment,null,r.createElement("div",{className:W.Fb},(0,h.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")),r.createElement(_.Kz,{multiple:.5}),r.createElement("div",{className:W.b0},(0,h.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")),r.createElement(_.Kz,{multiple:4}),r.createElement("div",{style:j.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$},t.map((e,t)=>r.createElement(_.il,{key:`collaborator-email-input-${t}`,value:e,onChange:e=>n(e.target.value,t),placeholder:(0,h.t)("pro_cart.add_collaborators.email")})),r.createElement(_.Us,{onClick:()=>{let e=[...t];e.push(""),a(e)},trusted:!0,style:j.sx.alignLeft.font14.fontMedium.$},(0,h.tx)("pro_cart.add_collaborators.add_another"))),r.createElement("div",{style:j.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$},r.createElement(_.vd,{disabled:!!e,style:j.sx.font14.add({height:"44px",width:"110px"}).$,onClick:s},(0,h.tx)("pro_cart.add_collaborators.sent_invites")),r.createElement(_.Ph,{trusted:!0,onClick:l,style:j.sx.colorTextSecondary.alignCenter.$},(0,h.tx)("pro_cart.add_collaborators.skip_for_now"))))}var H=a(140593),X=a(838516),q=a(485727),J=a(163023),Q=a(392592),Z=a(67294),ee=a(164141),et=a(720647),ea=a(36816),er=a(498606),es=a(928491),el=a(501191);let en="564px",ei=(0,X.s)((e,t)=>t(Q.F.enqueue({message:e})));function eo(e){let t=(0,s.d4)(t=>{let a=e.selectedView.teamId?t.teamUserByTeamId[e.selectedView.teamId]||{}:null;return(0,R.BR)(a,t.user)}),a=(0,s.d4)(e=>e.payment),l=(0,s.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId]:null),n=a.editorStatusChanges,i=(0,s.wA)(),o=a.billingPeriod===G.tY.STUDENT,{increment:m,decrement:d}=(0,V.$7)(),[c,u]=(0,r.useState)(!0),{getDesignUnitCost:E,getWhiteboardUnitCost:y}=(0,I.Q)({currency:e.currency}),v=new B.vr(e.currency),f=(0,r.useCallback)((e,t,a)=>{let r=[...n[t][e]];r.splice(a,1),i(N.Je({editorStatusChanges:{...n,[t]:{...n[t],[e]:r}}}))},[i,n]),T=(e,t,a)=>{switch(e){case L._Y.WHITEBOARD:switch(t){case"upgrade":return(0,h.t)("pro_cart.adjust_editors.will_become_figjam_editor.seat_rename",{email:a});case"downgrade":return(0,h.t)("pro_cart.adjust_editors.will_become_figjam_viewer",{email:a});default:(0,H.xb)(t)}case L._Y.DESIGN:case L._Y.SLIDES:case L._Y.COOPER:case L._Y.SITES:switch(t){case"upgrade":return(0,h.t)("pro_cart.adjust_editors.will_become_design_editor.seat_rename",{email:a});case"downgrade":return(0,h.t)("pro_cart.adjust_editors.will_become_design_viewer",{email:a});default:(0,H.xb)(t)}default:(0,H.xb)(e)}},b=(0,r.useCallback)((e,t)=>()=>{let a;if(u(!1),-1!==(a=n.upgrade[e].indexOf(t.id)))f(e,"upgrade",a),ei(T(e,"downgrade",t.email),i),d(e,t.email);else if(-1!==(a=n.downgrade[e].indexOf(t.id)))f(e,"downgrade",a),ei(T(e,"upgrade",t.email),i),m(e,t.email);else{let a=t["whiteboard"===e?"whiteboard_paid_status":"design_paid_status"]===ea.Zf.FULL?"downgrade":"upgrade",r=[...n[a][e]];r.push(t.id),i(N.Je({editorStatusChanges:{...n,[a]:{...n[a],[e]:r}}})),ei(T(e,a,t.email),i),("upgrade"===a?m:d)(e,t.email)}},[i,n,d,m,f,u]),x=(0,R.Ky)(t,n,L._Y.DESIGN),w=(0,R.Ky)(t,n,L._Y.WHITEBOARD),A=a.numDesignEditors,C=Math.max(A,x),P=Math.max(w,a.numWhiteboardEditors);C!==A&&i(N.js({numDesignEditors:C})),P!==a.numWhiteboardEditors&&i(N.Az({numWhiteboardEditors:P}));let D=(0,R.O1)(A,x),k=(0,R.O1)(a.numWhiteboardEditors,w),M=()=>{i(S.to({type:ee.Bx,data:{seatDataByLicenseType:{[et.vu]:{minSeats:x,currentSeats:C,seatUnitCostInCents:E(a.billingPeriod)},[et.tL]:{minSeats:w,currentSeats:P,seatUnitCostInCents:y(a.billingPeriod)}},showAnnualPrice:a.billingPeriod===G.tY.ANNUAL,updateAdditionalSeats:e=>{i(N.js({numDesignEditors:e[et.vu]})),i(N.Az({numWhiteboardEditors:e[et.tL]}))},dispatch:i,currency:e.currency,isProTeam:!0}}))},O=r.useCallback((e,t)=>e["whiteboard"===t?"whiteboard_paid_status":"design_paid_status"]===ea.Zf.FULL&&!n.downgrade[t].includes(e.id)||n.upgrade[t].includes(e.id),[n.downgrade,n.upgrade]),F=t.reduce((e,t)=>(e[t.id]={design:O(t,L._Y.DESIGN),whiteboard:O(t,L._Y.WHITEBOARD),slides:O(t,L._Y.SLIDES),sites:O(t,L._Y.SITES)},e),{}),z=!1,U=0;for(let e of t)if(F[e.id].whiteboard&&U++,F[e.id].design&&U++,z=1===U,U>1)break;let K=t[0];return(0,r.useEffect)(()=>{0===U&&!e.isLoading&&K?.id&&(i(N.Je({editorStatusChanges:{...n,upgrade:{design:[K.id,...n?.upgrade?.design??[]],whiteboard:[K.id,...n?.upgrade?.whiteboard??[]],slides:[K.id,...n?.upgrade?.slides??[]],sites:[K.id,...n?.upgrade?.sites??[]],cooper:[K.id,...n?.upgrade?.cooper??[]]}}})),m(L._Y.DESIGN,K.email),m(L._Y.WHITEBOARD,K.email))},[i,n,U,e.isLoading,K?.id,K?.email,m,P,O,K,c,d]),r.createElement(r.Fragment,null,r.createElement("div",{className:W.Fb},(0,h.tx)("pro_cart.adjust_editors.choose_your_figma_design_and_figjam_editors.seat_rename_dev_mode")),r.createElement(_.Kz,{multiple:.5}),r.createElement("div",{className:W.b0,style:j.sx.add({width:en,margin:"auto"}).$},(0,h.tx)("pro_cart.adjust_editors.subtitle")),r.createElement(_.Kz,{multiple:3}),e.error&&r.createElement("div",{style:j.sx.add({width:en,margin:"auto"}).$},r.createElement(p._,{color:p.S.ERROR,text:e.error})),e.error&&r.createElement(_.Kz,{multiple:2}),r.createElement("div",{className:W.sD},r.createElement("div",{className:W.re},r.createElement(_.Kz,{multiple:2.5}),r.createElement("div",{className:W.Ks},r.createElement("div",{className:`${W.HY} ${W.ab} ${W.p7}`},r.createElement("div",{className:W.Ps},l?r.createElement(es.rE,{key:l.id,entity:l,size:24}):r.createElement(es.rE,{key:e.teamName,entity:{name:e.teamName},size:24}))),r.createElement("div",{className:`${W.HY} ${W.E0}`,"data-testid":"design-column-header"},r.createElement("div",null,(0,h.tx)("pro_cart.adjust_editors.figma_design_column_title")),r.createElement(_.Kz,{multiple:.75}),r.createElement("div",{className:W.EU},(0,h.tx)("pro_cart.design_billing_cost_per_month.seat_rename",{monthlyCostInDollars:v.formatMoney(E(a.billingPeriod))})),r.createElement(r.Fragment,null,r.createElement(_.Kz,{multiple:.75}),r.createElement(q.G,null))),r.createElement("div",{className:`${W.HY} ${W.E0}`,"data-testid":"figjam-column-header"},r.createElement("div",null,(0,h.tx)("general.figjam")," "),r.createElement(_.Kz,{multiple:.75}),r.createElement("div",{className:W.EU},(0,h.tx)("pro_cart.whiteboard_billing_cost_per_month.seat_rename",{monthlyCostInDollars:v.formatMoney(y(a.billingPeriod))})))),r.createElement(_.Kz,{multiple:2.5})),r.createElement("div",{className:W.re},e.isLoading&&r.createElement(_.Kz,{multiple:1.5}),r.createElement(g.x,{isLoading:e.isLoading},()=>r.createElement(r.Fragment,null,t.map((e,a)=>{let s=a===t.length-1;return r.createElement("div",{key:e.id},r.createElement(_.Kz,{multiple:1.5}),r.createElement("div",{className:W.Ks},r.createElement("div",{className:W.ab},r.createElement(Z.H8,{user:e}),r.createElement("div",{className:W.QB},r.createElement("div",{className:W.ni},e.handle),r.createElement("div",{className:W.W},e.email))),r.createElement("div",{className:W.E0},r.createElement("span",{"data-tooltip-type":er.Ib.TEXT,"data-tooltip":F[e.id].design&&z?(0,h.t)("pro_cart.adjust_editors.at_least_one_editor.seat_rename"):(0,h.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},r.createElement(_.tB,{id:`toggle-design-editor-${e.id}`,checked:F[e.id].design,disabled:o||z&&F[e.id].design,onChange:b(L._Y.DESIGN,e),className:W.kv}))),r.createElement("div",{className:W.E0},r.createElement("span",{"data-tooltip-type":er.Ib.TEXT,"data-tooltip":F[e.id].whiteboard&&z?(0,h.t)("pro_cart.adjust_editors.to_uncheck_first_check_another"):(0,h.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},r.createElement(_.tB,{id:`toggle-whiteboard-editor-${e.id}`,checked:F[e.id].whiteboard,disabled:o||z&&F[e.id].whiteboard,onChange:b(L._Y.WHITEBOARD,e),className:W.kv})))),r.createElement(_.Kz,{multiple:1.5}),!(o&&s)&&r.createElement("div",{className:W.pV}))}),!o&&r.createElement(r.Fragment,null,r.createElement(_.Kz,{multiple:2.5}),r.createElement("div",{className:W.Su},r.createElement("div",{className:W.ab},r.createElement("div",{className:W.uD,onClick:M},r.createElement(J.B,{className:W.Hl,svg:el.A}),r.createElement("span",null,(0,h.tx)("pro_cart.adjust_editors.add_additional_editors.seat_rename")))),r.createElement("div",{className:`${W.HY} ${W.E0}`},r.createElement("div",null,(0,h.tx)("all_carts.num_editors.seat_rename",{numEditors:C})),r.createElement("div",{className:W.EU},D>0&&(0,h.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:D}))),r.createElement("div",{className:`${W.HY} ${W.E0}`},(0,h.tx)("all_carts.num_editors.seat_rename",{numEditors:P}),r.createElement("div",{className:W.EU},k>0&&(0,h.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:k})))),r.createElement(_.Kz,{multiple:2.5})))),e.isLoading&&r.createElement(_.Kz,{multiple:1.5}))))}var em=a(684614),ed=a(625223);function ec({chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,currency:s,updateCurrency:l,upgradeExistingTeam:n,parentRef:i}){return r.createElement("div",{ref:i},r.createElement("div",{className:W.Fb},(0,h.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team")),r.createElement("div",{className:W.dX},r.createElement(ed.O,{currency:s,chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,updateCurrency:l,upsellSource:U.b.CREATE_NEW_PAID_TEAM,withUpgradeExistingTeamOption:n,parentRef:i})))}var eu=a(403491),e_=a(707570),ep=a(921619),eg=a(397477);function eE(e){let{error:t,errorCode:a}=(0,s.d4)(e=>e.payment),l=!!t&&null===a,n=!!e.error;return r.createElement(r.Fragment,null,r.createElement("div",{className:W.Fb},(0,h.tx)("pro_cart.payment.enter_payment_details_title")),r.createElement(_.Kz,{multiple:3}),r.createElement("div",{style:j.sx.add({width:"416px",margin:"auto"}).$},l&&r.createElement("div",null,r.createElement(ep.I,{marginTop:0,message:t}),n&&r.createElement(_.Kz,{multiple:1.5})),l&&!n&&r.createElement(_.Kz,{multiple:2}),r.createElement("div",{className:W.P_},r.createElement("div",{style:j.sx.if(e.error?.code===A.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,j.sx.font14.add({marginTop:"92px"})).$},r.createElement(eg.F,{createPaymentElement:e.createPaymentElement,unmountPaymentElement:e.unmountPaymentElement,billingAddress:e.billingAddress,updateBillingAddress:e.updateBillingAddress,legalCompanyName:e.legalCompanyName,updateLegalCompanyName:e.updateLegalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,shippingAddress:e.shippingAddress,updateShippingAddress:e.updateShippingAddress,error:e.error,vatGstId:e.vatGstId,onVatGstIdChange:e.onVatGstIdChange,regionalVatGstId:e.regionalVatGstId,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,paymentMethodType:e.paymentMethodType,isCommunityCheckout:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp,isCheckout:!0})))))}var eh=a(55992),ey=a(629019),ev=a.n(ey),ef=a(281381),eS=a(893281),eN=a(493323),eT=a(154254),eb=a(101505),ex=a(988022),ew=a(66957),eA=a(347495),eI=a(5313),eC=a(729129),eP=a(237107);let eD=(0,s.Ng)(e=>({payment:e.payment,user:e.user}))(function(e){let t,a;let n=(0,s.wA)(),i=(0,x.Ik)(),o=e.payment.numDesignEditors,m=e.payment.billingPeriod===G.tY.STUDENT,{estimatedDesignCost:u,estimatedWhiteboardCost:p,getDesignUnitCost:E,getWhiteboardUnitCost:y}=(0,I.Q)({currency:e.currency}),v=new B.vr(e.currency);if(e.selectedView.paymentStep!==G.tn.CHOOSE_PLAN&&e.selectedView.paymentStep!==G.tn.PAYMENT_AND_ADDRESS)return null;let f=e=>{e===G.tY[G.tY.ANNUAL]?n(N.Lo({billingPeriod:G.tY.ANNUAL})):e===G.tY[G.tY.MONTHLY]&&n(N.Lo({billingPeriod:G.tY.MONTHLY})),n(N.js({numDesignEditors:o}))},S=(0,c.cn)(e.user),T=(0,h.t)("pro_cart.sidebar.next_payment_information"),b=eb.c.PAYMENT_INFORMATION;(m||e.selectedView.paymentStep===G.tn.PAYMENT_AND_ADDRESS)&&(T=(0,h.t)("pro_cart.sidebar.next_review"),b=eb.c.REVIEW);let w=(0,B._Z)(),A=u(o,e.payment.billingPeriod),C=12*u(o,G.tY.MONTHLY),P=E(e.payment.billingPeriod),D=E(G.tY.MONTHLY),k=p(e.payment.numWhiteboardEditors,e.payment.billingPeriod),M=12*p(e.payment.numWhiteboardEditors,G.tY.MONTHLY),O=y(e.payment.billingPeriod),R=y(G.tY.MONTHLY),V=i?r.createElement(eO,{price:P,localizeCurrency:v}):v.formatMoney(A),F=i?r.createElement(eO,{price:O,localizeCurrency:v}):v.formatMoney(k),z=C+M-u(o,G.tY.ANNUAL)-p(e.payment.numWhiteboardEditors,G.tY.ANNUAL);e.payment.billingPeriod===G.tY.ANNUAL?(A>0&&(t=v.formatMoney(C)),k>0&&(a=v.formatMoney(M)),i&&(t=v.formatMoney(D),a=v.formatMoney(R))):e.payment.billingPeriod===G.tY.STUDENT&&(t=i?v.formatMoney(D):r.createElement(eP.X6,{editorType:L._Y.DESIGN,numEditors:e.payment.numDesignEditors,currency:e.currency}),a=i?v.formatMoney(R):r.createElement(eP.X6,{editorType:L._Y.WHITEBOARD,numEditors:e.payment.numWhiteboardEditors,currency:e.currency}));let U=A+k,K=y(G.tY.ANNUAL),Y=y(G.tY.MONTHLY),j=E(G.tY.ANNUAL),$=E(G.tY.MONTHLY),H=(0,eP.U1)(K,Y),X=(0,eP.U1)(j,$);return U<0&&(0,d.$D)(l.e.BILLING,Error("[Billing] Estimated total is a negative amount."),{extra:{numDesignEditors:o,numWhiteboardEditors:e.payment.numWhiteboardEditors,upgrades:JSON.stringify(e.payment.editorStatusChanges),userId:e.user.id,subtotal:U,currency:e.currency}}),r.createElement("div",{className:W.Ie},i?r.createElement(r.Fragment,null,r.createElement(ek,{teamId:e.selectedView.teamId}),w&&r.createElement(r.Fragment,null,r.createElement(_.Kz,{multiple:3}),r.createElement(eM,{currency:e.currency,supportedCurrencies:(0,B.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency,hasCartStickerShock:i})),r.createElement(_.Kz,{multiple:2}),r.createElement("div",{className:W.pV}),r.createElement(_.Kz,{multiple:2})):r.createElement(r.Fragment,null,r.createElement("div",{className:W.LC},(0,h.tx)("pro_cart.sidebar.professional_plan")),w&&r.createElement(r.Fragment,null,r.createElement(_.Kz,{multiple:3}),r.createElement(eM,{currency:e.currency,supportedCurrencies:(0,B.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency}),r.createElement(_.Kz,{multiple:2}),r.createElement("div",{className:W.pV}),r.createElement(_.Kz,{multiple:2}))),S&&e.selectedView.paymentStep===G.tn.CHOOSE_PLAN&&r.createElement(r.Fragment,null,r.createElement("div",{className:W.ZD},(0,h.tx)("pro_cart.sidebar.is_this_an_education_team")),r.createElement(_.Kz,{multiple:1.5}),r.createElement(eS.z,{className:W.aq,onChange:e=>{"true"===e?n(N.Lo({billingPeriod:G.tY.STUDENT})):m&&(n(N.Lo({billingPeriod:G.tY.ANNUAL})),n(N.js({numDesignEditors:o})))},value:m.toString()},r.createElement(eS.Z,{value:"false",className:W.Ac},(0,h.tx)("pro_cart.sidebar.no")),r.createElement(eS.Z,{value:"true",className:W.Ac},(0,h.tx)("pro_cart.sidebar.yes"))),r.createElement(_.Kz,{multiple:1.5}),r.createElement("div",{className:W.pV}),r.createElement(_.Kz,{multiple:2})),!i&&r.createElement(r.Fragment,null,r.createElement(eB,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:f,discountAmount:H}),r.createElement(_.Kz,{multiple:2})),r.createElement(g.x,{isLoading:e.isLoading,className:W.F},()=>r.createElement(r.Fragment,null,r.createElement(eP.Wy,{"data-testid":"sidebar-design-summary",mainText:i?r.createElement("span",{className:eT.cx.fontMedium.$},(0,h.tx)("pro_cart.sidebar.exp_sticker_shock.design")):(0,h.tx)("pro_cart.info.figma_design_editors.seat_rename",{numEditors:o}),strikethroughPriceText:t,strikethroughPriceClassName:i?eT.cx.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:V,subText:i?void 0:r.createElement(eP.d6,{currentBillingPeriod:e.payment.billingPeriod,numEditors:o,currency:e.currency,noCents:!0,shouldStrikethroughMonthlyUnitCostIfAnnual:!0}),discountPercentage:i?void 0:A>0&&e.payment.billingPeriod===G.tY.ANNUAL?X:void 0,showDevModeIncludedText:!0}),r.createElement(_.Kz,{multiple:2}),r.createElement(eP.Wy,{"data-testid":"sidebar-whiteboard-summary",mainText:i?r.createElement("div",{className:eT.cx.fontMedium.$},(0,h.tx)("pro_cart.sidebar.exp_sticker_shock.figjam")):(0,h.tx)("pro_cart.info.figjam_editors.seat_rename",{numEditors:e.payment.numWhiteboardEditors}),strikethroughPriceText:a,strikethroughPriceClassName:i?eT.cx.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:F,subText:i?void 0:r.createElement(eP.ME,{shouldStrikethroughMonthlyUnitCostIfAnnual:!0,currency:e.currency}),discountPercentage:i?void 0:k>0&&e.payment.billingPeriod===G.tY.ANNUAL?H:void 0}),r.createElement(_.Kz,{multiple:2}),i&&!m&&r.createElement(r.Fragment,null,r.createElement(eL,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:f,localizeCurrency:v,savingsWithAnnualPlan:z}),r.createElement(_.Kz,{multiple:2})))),r.createElement("div",{className:W.pV}),r.createElement(_.Kz,{multiple:3}),i?r.createElement(ew.i,{numberOfDesignEditors:o,designSubtotal:v.formatMoney(A),numberOfFigjamEditors:e.payment.numWhiteboardEditors,figjamSubtotal:v.formatMoney(k),formattedSubtotal:v.formatMoney(U,{showFullFormat:(0,B._Z)()}),billingPeriod:e.payment.billingPeriod}):r.createElement(ew.m,{formattedSubtotal:v.formatMoney(U,{showFullFormat:(0,B._Z)()})}),r.createElement(_.Kz,{multiple:3}),m&&r.createElement(r.Fragment,null,r.createElement("div",{className:W.iY},(0,h.tx)("edu.education_teams_get_all_the_professional_plan_features_for_free")),r.createElement(_.Kz,{multiple:2})),r.createElement(_.vd,{className:W.fK,disabled:e.isLoading||e.isButtonDisabled||e.payment.submitPending,onClick:e.onNext,trackingProperties:{trackingDescriptor:b},dataTestId:"upgrade-next-button"},e.payment.submitPending?r.createElement(eN.kt,{className:W.S}):T))});function ek({teamId:e}){let t=(0,s.wA)();return r.createElement(r.Fragment,null,r.createElement("div",{className:eT.cx.font20.fontMedium.$},(0,h.tx)("pro_cart.sidebar.professional_plan")),r.createElement(_.Kz,{multiple:1}),r.createElement("p",{className:eT.cx.font13.fontNormal.lh24.maxW250.$},(0,h.tx)("pro_cart.sidebar.exp_sticker_shock.unlimited_files_and_projects",{learnMoreLink:r.createElement(_.Us,{className:eT.cx.colorTextBrand.cursorPointer.$,onClick:()=>{t(S.to({type:eI.q,data:{teamId:e??void 0,trackingProperties:{productArea:"upgrade_sidebar"},hasSecondaryBtn:!1}}))},trusted:!0},(0,h.tx)("pro_cart.sidebar.exp_sticker_shock.so_much_more"))})))}function eM({currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:s,hasCartStickerShock:l}){let n=eT.cx.flex.justifyBetween.itemsCenter.font13.$,i=l?eT.cx.fontMedium.$:eT.cx.fontSemiBold.$;return r.createElement("div",{className:l?n:W.h7},r.createElement("span",{className:i},(0,h.tx)("pro_cart.sidebar.currency")),r.createElement(eC.D,{currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:s,shortFormDisplay:!0}))}function eO({price:e,localizeCurrency:t}){let a=eT.cx.font18.fpl__textHeadingLargeLetterSpacing.fontMedium.$;return r.createElement("span",null,(0,h.tx)("pro_cart.sidebar.exp_sticker_shock.cost_per_editor_per_month",{cost:r.createElement("span",{className:a},t.formatMoney(e))}))}function eL({billingPeriod:e,onBillingCycleChange:t,localizeCurrency:a,savingsWithAnnualPlan:s}){let l=eT.cx.flex.alignCenter.$,n=eT.cx.colorTextSuccess.font13.$,i=eT.cx.colorText.font13.pl8.$;return r.createElement("div",{className:l},r.createElement(eA.l,{dataTestId:"billing-period-toggle",on:e===G.tY.ANNUAL,onChange:()=>{t(e===G.tY.ANNUAL?G.tY[G.tY.MONTHLY]:G.tY[G.tY.ANNUAL]),(0,ex.Cu)({name:"Upgrade sidebar billing period toggle"})}}),r.createElement("span",{className:i},(0,h.tx)("pro_cart.sidebar.exp_sticker_shock.by_paying_annually",{saveAmountText:r.createElement("span",{className:n},(0,h.tx)("pro_cart.sidebar.exp_sticker_shock.save_amount_per_year",{saveAmount:a.formatMoney(s)}))})))}function eB({billingPeriod:e,onBillingCycleChange:t,discountAmount:a}){return e!==G.tY.STUDENT?r.createElement(r.Fragment,null,r.createElement("div",{className:W.ZD},(0,h.tx)("pro_cart.sidebar.billing_cycle")),r.createElement(_.Kz,{multiple:2}),r.createElement(eS.z,{className:W.aq,onChange:t,value:G.tY[e]},r.createElement(eS.Z,{value:G.tY[G.tY.ANNUAL],className:W.Ac},r.createElement("div",{className:ev()(W.Wu,W.Yw)},r.createElement("span",null,(0,h.tx)("pro_cart.sidebar.annual")),r.createElement(ef.Ex,{className:W.qS,color:ef.zE.SUCCESS,size:ef.vj.LARGE,subtle:!0,text:(0,h.tx)("pro_cart.sidebar.save_up_to_discount",{discountAmount:a})}))),r.createElement(eS.Z,{value:G.tY[G.tY.MONTHLY],className:W.Ac},r.createElement("div",{className:eT.cx.flex.justifyEnd.$},(0,h.tx)("pro_cart.sidebar.monthly")))),r.createElement(_.Kz,{multiple:2}),r.createElement("div",{className:W.pV})):null}function eR(e){let t;let a=(0,M.iZ)(),u=a?.id,D=(0,o.DC)(),j=(0,s.d4)(e=>e.payment),H=(0,s.d4)(e=>e.dropdownShown),X=(0,s.d4)(e=>e.teams),q=e.selectedView.paymentStep,J=r.useRef(null),[Q,Z]=(0,r.useState)(D?.team_name??""),[ee,et]=(0,r.useState)(C.kt),ea=(0,R.PS)((0,k.FC)()),er=!!(0,o.kc)().redirect_starter_team_loophole&&!(0,o.kc)().close_starter_team_loophole&&(null===e.selectedView.teamId||e.selectedView.teamFlowType!==K.SC.UPGRADE_EXISTING_TEAM),[es,el]=(0,r.useState)(D?.currency||j.currency||(0,B.LN)()),en=e=>{el(e),ej(N.MN({currency:e}))},ei=er?G.tY.ANNUAL:j.billingPeriod,{numDesignEditors:ed,numWhiteboardEditors:ep,editorStatusChanges:eg}=j,{ignoreCurrentPlan:ey}=e.selectedView,ev=e.selectedView.teamId;(0,r.useEffect)(()=>{er&&(i.Ay.redirect("/"),(0,d.$D)(l.e.MONETIZATION_UPGRADES,Error("Starter loophole pathway entered, redirecting back to default"),{extra:{...e.selectedView}}))},[e.selectedView,er]);let ef=(0,s.d4)(t=>(0,z.Np)(t,{...e.selectedView,paymentStep:G.tn.CONFIRM_PAY})),eS=(0,s.d4)(t=>(0,z.Np)(t,{...e.selectedView,paymentStep:G.tn.PAYMENT_AND_ADDRESS})),eN=(0,x.Mh)(),{estimatedDesignCost:eT,estimatedWhiteboardCost:eb}=(0,I.Q)({currency:es}),ex=eT(ed,ei)+eb(ep,ei),{createPaymentElement:ew,unmountPaymentElement:eA,savePayment:eI,billingAddress:eC,updateBillingAddress:eP,shippingAddress:ek,updateShippingAddress:eM,customerLegalName:eO,setCustomerLegalName:eL,nameOnPaymentMethod:eB,setNameOnPaymentMethod:eR,vatGstId:eV,setVatGstId:eF,regionalVatGstId:ez,setRegionalVatGstId:eU,paymentMethodType:eG,error:eK}=(0,A.Op)({setupIntentParams:{redirect_url:ef,error_redirect_url:eS,subtotal_estimate:ex,currency:es},customerInfo:{teamId:ev},paymentFlowSource:A.wn.PRO_UPGRADE,currency:es,billingPeriod:ei,defaultCountry:(0,B.ub)(),initialBillingAddress:D?.billing_address,initialNameOnPaymentMethod:D?.name_on_payment_method,initialShippingAddress:D?.shipping_address,initialCustomerLegalName:D?.customer_legal_name,initialVatGstId:D?.vat_gst_id,initialRegionalVatGstId:D?.regional_vat_gst_id,teamName:D?.team_name||Q,canSeeBillingAddressExp:eN,isCheckout:!0}),eY=eK?.code===A.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,ej=(0,s.wA)(),eW=(0,V.Ud)({teamId:ev,canSeeBillingAddressExp:eN}),e$=()=>{ej(v.$T({...e.selectedView,paymentStep:G.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:ey}))};(0,C.pI)({loadingPaidEditors:eW,teamId:ev,teamName:ev?void 0:Q,setTeamName:ev?void 0:Z,collaborators:ev||e.selectedView.teamFlowType!==K.SC.CREATE?void 0:ee,setCollaborators:ev||e.selectedView.teamFlowType!==K.SC.CREATE?void 0:et});let eH=(0,s.d4)(e=>e.currentUserOrgId),eX=ey?null:eH,eq=(0,s.d4)(e=>eX?e.orgById[eX]:null),eJ=(0,Y.Q)({currentOrgId:eX,currentTeamId:null}),eQ=eJ.data?.currentUser?.baseOrgUser?.workspaceUsers,eZ=eQ?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:e0}=(0,O.LM)(eq,eZ??null),e1=(0,s.d4)(e=>(0,F.isOrgUserExternallyRestrictedFromState)(e));(0,r.useEffect)(()=>{q===G.tn.PAYMENT_AND_ADDRESS&&eY&&e$()});let e2=(0,s.d4)(e=>!!e.user&&(0,c.cn)(e.user));(0,r.useEffect)(()=>{e2&&e.selectedView.isEduTeam?ej(N.Lo({billingPeriod:G.tY.STUDENT})):e.selectedView.isEduTeam&&ej(N.Lo({billingPeriod:G.tY.UNSPECIFIED}))},[ej,e.selectedView.isEduTeam,e2]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===K.SC.CREATE_AND_UPGRADE&&(e1||e0===O.z4.TEAM_CREATION_CONTROL)&&(i.Ay.redirect("/"),ej(E.s.error((0,h.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,e1,e0,ej]);let e5=j.currencyToSwitch;(0,r.useEffect)(()=>{e5&&el(e5)},[el,e5]);let e8=ei===G.tY.STUDENT,e9=ee.filter(e=>e&&e.trim()).map(e=>e.trim()),e3=e9.filter(e=>!(0,n.xf)(e)),e4=!!a&&e9.filter(e=>e===a.email).length>0,e6=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,r=a.get("onCompleteRedirectFileKey"),s=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let l=(0,eh.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,ei,j.promo,e.selectedView.planType||K.Sc.UNDETERMINED);q===G.tn.CREATE_TEAM&&(Z(Q.trim()),ej(v.$T({...e.selectedView,teamId:null,paymentStep:l,ignoreCurrentPlan:ey}))),q===G.tn.ADD_COLLABORATORS&&(e3.length?ej(E.s.error((0,h.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:e3[0]}))):e4?ej(E.s.error((0,h.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):ej(v.$T({...e.selectedView,paymentStep:l,ignoreCurrentPlan:ey}))),q===G.tn.CHOOSE_PLAN?e8?ej(v.$T({...e.selectedView,paymentStep:l,billingPeriod:G.tY.STUDENT,ignoreCurrentPlan:ey})):(ej(N.Je({editorStatusChanges:eg})),ej(v.$T({...e.selectedView,paymentStep:l,billingPeriod:j.billingPeriod,...r?{searchParams:{onCompleteRedirectFileKey:r,onCompleteRedirectNodeId:s}}:{},ignoreCurrentPlan:ey}))):q===G.tn.PAYMENT_AND_ADDRESS&&(ej(N.I2({submitPending:!0})),await eI(),ej(N.I2({submitPending:!1})))},e7=e.selectedView.teamFlowType===K.SC.CREATE?()=>{ej((0,P.KQ)({teamName:Q,orgAccess:L.bU.PUBLIC,inviteEmails:e9,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,C.Al)(a?.id)},ignoreCurrentPlan:ey}))}:void 0;(e.selectedView.teamFlowType===K.SC.CREATE_AND_UPGRADE||e.selectedView.teamFlowType===K.SC.UPGRADE_EXISTING_TEAM)&&(1===ea.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=K.SC.UPGRADE_EXISTING_TEAM;ej(v.$T({...e.selectedView,teamFlowType:a,teamId:ea[0].id,paymentStep:(0,eh.kR)(e.selectedView.paymentStep,a,t||null,j.promo,K.Sc.TEAM,G.tn.CHOOSE_PLAN),planType:K.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:ey}))}:ea.length>1&&(t=e=>{e&&ej(N.Lo({billingPeriod:e})),ej((0,S.to)({type:y.dR,data:{plan:y.In.PRO,upsellSource:U.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let te=()=>{let t=()=>{(0,o.sj)(),(0,V.Mt)(ej),(0,K.h5)(e.selectedView.teamFlowType)&&null===ev&&(0,C.Al)(u)};if(e.selectedView.teamId&&e8)ej(N.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&j.promo){let a=e.selectedView.teamId,r=(0,o.kc)().ps_benchmark;ej(T.S_({teamId:a,teamName:X[a].name,promoCode:j.promo?.code||"",onSuccess:()=>{t(),(0,m._H)(),ej(N.Ay({promo:null})),r&&u?e.selectedView.previousView?v.$T(e.selectedView.previousView):f._l({workspace:{userId:u,orgId:null,teamId:a},view:{view:"allProjects"}}):ej(v.$T(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,m._H)(),ej(N.Ay({promo:null})),ej(v.$T({...e.selectedView,paymentStep:G.tn.PLAN_COMPARISON,ignoreCurrentPlan:ey}))}}))}else{ej(b.b({completed_pro_cart_flow:!0}));let a=j.taxes?.sub_total??0,r=j.taxes?.tax_total??0,s=j.taxes?.total??0;ej(N.I2({submitPending:!0})),ej((0,T.gk)({teamId:e.selectedView.teamId,selectedCurrency:es,teamName:Q,teamFlowType:e.selectedView.teamFlowType,invites:e9,hasSelectedStudentTeam:e8,onSuccess:t,displayedCostBreakdown:{subtotal:a,tax_total:r,total:s}}))}},tt=new URLSearchParams(i.Ay.location.search),ta=tt.get("onCompleteRedirectFileKey"),tr=tt.get("onCompleteRedirectNodeId"),ts=a&&C.lX({teamId:ev,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===K.SC.CREATE_AND_UPGRADE&&(e1||e0===O.z4.TEAM_CREATION_CONTROL)?r.createElement(r.Fragment,null):r.createElement(w.fu,{name:"Upgrade Team",properties:{teamId:e.selectedView.teamId,teamFlowType:e.selectedView.teamFlowType,planType:e.selectedView.planType,step:q,currency:es,inPublishDraftExp:!!(ta&&tr)}},r.createElement("div",{className:W.im,"data-testid":"team-upgrade-v2"},r.createElement(eh.vU,{selectedView:e.selectedView}),r.createElement("div",{className:W.Jr},r.createElement("div",{className:W.uz,ref:J},r.createElement(_.Kz,{multiple:4}),q===G.tn.PLAN_COMPARISON&&r.createElement(ec,{chooseStarterPlan:e7,chooseProPlan:t=>{ej(N.Lo({billingPeriod:t}));let a=(0,K.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:K.SC.CREATE_AND_UPGRADE;ej(v.$T({...e.selectedView,teamFlowType:a,paymentStep:(0,eh.kR)(e.selectedView.paymentStep,a,t,j.promo,K.Sc.TEAM),billingPeriod:t,planType:K.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:ey}))},chooseOrgPlan:()=>{ej(N.Bq({currency:es,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:Q,inviteEmails:e9,previousView:e.selectedView},upsellSource:U.b.UPGRADE_NEW_TEAM_V2}))},currency:es,updateCurrency:e=>en(e),upgradeExistingTeam:t,parentRef:J}),q===G.tn.CREATE_TEAM&&r.createElement(e_.y,{type:e.selectedView.teamFlowType===K.SC.CREATE?e_.I.STARTER:e_.I.PRO,teamName:Q,setTeamName:Z,onNext:e6,upgradeExistingTeam:t?()=>t?.(ei):void 0,promo:j.promo}),q===G.tn.ADD_COLLABORATORS&&r.createElement($,{disableInvites:!e9.length,collaborators:ee,setCollaborators:et,willSendInvites:e6,skipInviteStep:()=>{if(et(C.kt),u){let e=(0,C.lX)({teamId:null,userId:u});e&&(0,C.dT)(u,{...e,newCollaborators:C.kt})}ej(v.$T({...e.selectedView,paymentStep:G.tn.PLAN_COMPARISON,ignoreCurrentPlan:ey}))}}),q===G.tn.CHOOSE_PLAN&&r.createElement(r.Fragment,null,r.createElement(em.W,{billingPeriod:ei,isProCart:!0}),r.createElement(eo,{selectedView:e.selectedView,isLoading:eW,currency:es,error:eY?eK?.message:null,teamName:Q})),q===G.tn.PAYMENT_AND_ADDRESS&&r.createElement(r.Fragment,null,r.createElement(em.W,{billingPeriod:ei,isProCart:!0}),r.createElement(eE,{billingAddress:eC,updateBillingAddress:eP,shippingAddress:ek,updateShippingAddress:eM,legalCompanyName:eO,updateLegalCompanyName:eL,nameOnPaymentMethod:eB,updateNameOnPaymentMethod:eR,createPaymentElement:ew,unmountPaymentElement:eA,error:eK,vatGstId:eV,onVatGstIdChange:eF,regionalVatGstId:ez,onRegionalVatGstIdChange:eU,paymentMethodType:eG,isCommunityCheckout:!1,canSeeBillingAddressExp:eN,isCheckout:!0})),q===G.tn.CONFIRM_PAY&&r.createElement(r.Fragment,null,r.createElement(em.W,{billingPeriod:ei,isProCart:!0,isReviewPage:!0}),r.createElement("div",{className:W.Fb},(0,h.tx)("pro_cart.review.lets_make_sure_everything_looks_right")),r.createElement(_.Kz,{multiple:3}),ts&&r.createElement("div",{className:W.vK},r.createElement(p._,{color:p.S.INFORMATION,text:(0,h.t)("pro_cart.review.extra_validation")})),ts&&r.createElement(_.Kz,{multiple:2}),r.createElement(g.x,{isLoading:eW},()=>r.createElement(eu.d,{selectedView:e.selectedView,teamName:Q,onClickConfirm:te,billingAddress:eC,shippingAddress:ek,canSeeBillingAddressExp:eN,currency:es}))),r.createElement(_.Kz,{multiple:9})),r.createElement(eD,{selectedView:e.selectedView,onNext:e6,isLoading:eW,isButtonDisabled:eY,currency:es,updateCurrency:e=>en(e),dropdownShown:H}))))}function eV(e){return r.createElement(u.tH,{sentryTags:{area:l.e.MONETIZATION_UPGRADES},boundaryKey:"TeamUpgradeV2",fallback:u.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:D.y4},r.createElement(eR,{...e}))}},310908:(e,t,a)=>{a.d(t,{J:()=>i});var r=a(411855),s=a(188507),l=a(524173),n=a(939863);function i({index:e}){let t=(0,s.d4)(e=>!!e.payment.promo);return r.createElement("div",{className:"team_creation_breadcrumbs--stepBreadcrumbs--tP08U step_breadcrumb--stepBreadcrumbs--E4Woe"},r.createElement(l.On,{selected:1===e,number:1,text:(0,n.t)("team_creation.name_your_team")}),r.createElement(l.On,{selected:2===e,number:2,text:(0,n.t)("team_creation.add_team_members")}),!t&&r.createElement(l.On,{selected:3===e,number:3,text:(0,n.t)("team_creation.finish_setup")}))}},66957:(e,t,a)=>{a.d(t,{i:()=>d,m:()=>m});var r=a(411855),s=a(946689),l=a(939863),n=a(175290),i=a(809840),o=a(622139);function m(e){let t=r.createElement(i.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,l.tx)("checkout.review_in_tax_disclaimer"));return r.createElement(r.Fragment,null,r.createElement(n.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,l.tx)("pro_cart.info.subtotal")),r.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:e.formattedSubtotal}))),r.createElement(i.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,l.tx)("checkout.tax_disclaimer_revised",{checkoutStep:t})))}function d({numberOfDesignEditors:e,designSubtotal:t,numberOfFigjamEditors:a,figjamSubtotal:m,formattedSubtotal:d,billingPeriod:c}){let u=r.createElement(i.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,l.tx)("checkout.review_in_tax_disclaimer"));return r.createElement(r.Fragment,null,r.createElement(n.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-design-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-design-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,l.tx)("pro_cart.sidebar.exp_sticker_shock.design_editors",{numEditors:e})),r.createElement("span",{"data-testid":"sidebar-design-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-design-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:t}))),r.createElement(s.Kz,{multiple:2}),r.createElement(n.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-whiteboard-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,l.tx)("pro_cart.sidebar.exp_sticker_shock.figjam_editors",{numEditors:a})),r.createElement("span",{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:m}))),r.createElement(s.Kz,{multiple:2}),r.createElement(n.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"medium",fontSize:13},(0,l.tx)(c===o.tY.ANNUAL?"pro_cart.sidebar.exp_sticker_shock.subtotal_per_year":"pro_cart.sidebar.exp_sticker_shock.subtotal_per_month")),r.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"medium",fontSize:13,children:d}))),r.createElement(i.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,l.tx)("checkout.tax_disclaimer_revised",{checkoutStep:u})))}},5313:(e,t,a)=>{a.d(t,{q:()=>_});var r=a(411855),s=a(188507),l=a(737947),n=a(457215),i=a(758888),o=a(939863),m=a(553015),d=a(662275),c=a(672517),u=a(212957);let _=(0,a(237870).Ju)(function({teamId:e,trackingProperties:t,hasSecondaryBtn:a=!0}){let _=(0,r.useMemo)(()=>(0,n.To)(),[]),p=(0,s.wA)(),g=()=>{p(d.Ce())},E=a?r.createElement(m.V,{onClick:()=>{l.Ay.redirect("/pricing","_blank")}},(0,o.t)("pro_onboarding.pro_feature_modal.compare_plans")):null;return r.createElement(c.fu,{name:"Pro Features Modal",properties:t??u.S.getTrackingProperties(e)},r.createElement(i.n,{..._,dismissModal:g,clickPrimaryBtn:g,secondaryBtn:E,showPricing:!1,panelTitleSize:i.I.LARGE,cardsClickable:!0}))},"ProFeaturesModal")},921619:(e,t,a)=>{a.d(t,{I:()=>s});var r=a(411855);class s extends r.Component{render(){return r.createElement("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32}},r.createElement("div",{className:"persisted_error--sideBar--C-abH"}),r.createElement("div",{className:"persisted_error--message--EiciR"},this.props.message))}}},158875:(e,t,a)=>{a.d(t,{X:()=>s});var r=a(411855);let s=(0,a(672517).tf)(function(e){return r.createElement("div",{onClick:e.onClick},e.children)})},797129:(e,t,a)=>{a.d(t,{O:()=>s});var r=a(411855);function s(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"full_width_page--closeMenu--M8Pvm"},e.menu),r.createElement("div",{ref:e.pageRef,className:"full_width_page--fullWidthPage--aQfdt overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",...e}))}},881690:(e,t,a)=>{a.d(t,{o:()=>l});var r=a(411855);if(443==a.j)var s=a(57860);function l(e){return r.createElement(r.Suspense,{fallback:r.createElement(s.k,null)},e.children)}}}]);

//# debugId=fec59413-6edd-5595-9366-6f5c20b7ea41

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/56d9baf71e866942cecafb9ba6c6edd32c4e8acf/billing-22e41d03976124d3.min.js.map